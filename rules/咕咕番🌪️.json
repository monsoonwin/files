{"last_chapter_rule":".anthology-list-play&&a,-1&&Text.js:'更新至：'+input","pageList":[{"col_type":"movie_3","name":"⓸通用解析","path":"lazy","rule":"var lazy = $('').lazyRule(() => {\nif (input.indexOf('magnet:?xt') == -1) {\n    try{\n      var html = JSON.parse(request(input).match(/r player_.*?=(.*?)</)[1])\n    var url = html.url\n    if (html.encrypt == '1') {\n        url = unescape(url);\n    } else if (html.encrypt == '2') {\n        url = unescape(base64Decode(url));\n    }\n    if (/m3u8|mp4|flv/.test(url)) {\n       if (/vip|hd/.test(url)) {\r\n           evalPrivateJS('TuSJdpnZaqXGRvvOFRR+3S7eZUjeC1CffFbHhoo0e5+aZ7Kav9KZVZsfkwKkUFf4wzkTrio4jARH6ZwTXpRlH3kI43rWCTU4PdYam15pPYiq5cW0H6gUXhJW7tmJtyLKdje1KapBIGvWaXI0WmoHoMEFBV/MAicmPgpyAJZjsc5Emvdh1n72WPPiyhYNCoMnZ9JpP6aEsWQEmQMcAjPxgs6UMvsO/POw5Ccr79sJzicst/Ll3IOj5M+PvqKrTd6147VGPEztjsUeEudASzTcn+95C9Vg1uwUvd9z0w5qsPboQh5oZhTys4RQEzBGIqulQMAAQY4IFkanWX95EINZDX50mAiOSGyId06HsprAel/fh7wyMXdmeu+S15XncO7UuujMOmGgSAEN/Ssc2ezkxlGvpdyhbl4p4DaQug/nrgswhZj75/M53sKYX2zRgOST7CMjV/+pPJd1KP934uu/VsBQUG69mWN+KaFWhKnwBPhV9qdqGz/LSJnFxIvQ8kBx')\n           return u + \"?url=\" + base64Encode(url) + \"#.m3u8\";\r\n        }\r\n        return url + \";{Origin@https://player.gxdm01.org&&User-Agent@Mozilla/5.0&&Referer@https://player.gxdm01.org/}\";\n    } else {\n        requireCache('https://agit.ai/lzk23559/PublicRule/raw/branch/master/x5rule.js', 24);\n        return x5rule(input, input);\n  }\n}catch(e){\n//requireCache('https://agit.ai/lzk23559/PublicRule/raw/branch/master/x5rule.js', 24);\n        //return x5rule(input, input);\n        return 'video://' + input;\n}   \n } else {\n        return input\n    }\n})"},{"col_type":"movie_3","name":"⓶二级页面","path":"ej","rule":"js:\nvar d = []\nMY_URL=MY_URL.replace('hiker://empty##','');\nvar html = fetch(MY_URL);\n\neval(JSON.parse(fetch('hiker://page/er', {})).rule);\neval(JSON.parse(fetch('hiker://page/lazy', {})).rule);\nvar playlist = [{\n    /*自定义:{\n        图标: 'https://hikerfans.com/tubiao/q/3.png',\n        正序颜色: '#32CD32',\n        逆序颜色: '#FA8072',\n        线路选中: '#87CEEB',       \n    },*/\n    类型: '在线观看',\n    线路: 'body&&.anthology-tab&&a',\n    选集: 'body&&.anthology-list-play:not(:matches(α))',\n    线路名称: 'a--.fa&&Text@@.replace(\"α\",\"\")',\n    选集列表: 'body&&a:not(:matches(α))',\n    排除: '',\n    //选集名称: 'Text',\n    //选集链接: 'a&&href',\n    //倒序:true,\n    解析: lazy,\n    推送: true,\n}, {\n    类型: '磁力下载',\n    //线路: '',\n    选集: 'body&&.sort-itemm',\n    //线路名称: 'Text@@.replace(\"β\",\"\")',\n    //选集列表: 'ul&&li',\n    选集名称: 'Text',\n    选集链接: 'a&&href',\n    样式: 'avatar',\n    图标: 'https://img.vinua.cn/images/Ooz4R.jpeg'\n}]\n\nvar obj = {\n    main: pdfa(html, '.gen-search-form&&li:not(:matches(状态))'),\n    sort: ['片名', '导演', '类型','上映', '更新', '主演', '演员'],\n    //img: MY_PARAMS.img,\nimg: pd(html, '.lazy&&data-src'),//封面图片\n}\n\nErji.setContent(obj);\nErji.setDesc(pdfh(html, '.cor3&&Text').replace('收起','').replace(/\\s/g,''));//剧情简介\neval(JSON.parse(fetch('hiker://page/tool', {})).rule);//外部快捷搜索\nErji.getPlayers(playlist);\nErji.声明();\n\n\n\nsetResult(d)"},{"col_type":"movie_3","name":"⑤搜索页面","path":"ss","rule":"js:\nvar d = [];\n\nconst base_url = 'http://resou.today/art/29.html';\n\nlet true_url = getMyVar(MY_RULE.url, base_url);\nMY_URL=true_url;\nvar html = fetch(base_url, {\n    headers: {\n        'User-Agent': MOBILE_UA\n    }\n});\n\nvar Icon_prefix = 'https://raw.fastgit.org/ls125781003/lmtubiao/main/more/';\n\nd.push({\n            title: '返回',\n            url: $().lazyRule(() => {\n                refreshPage();     \n                back(false)\n                    return \"toast://返回规则首页\"  \n            }),\n            pic_url: Icon_prefix + '47.png'+ \"@Referer=\",\n            col_type: \"icon_small_3\",\n                    \n        });\n\n\nd.push({\n            title: '筛选',\n            url: 'hiker://page/shai?page=fypage#noHistory#',\n            pic_url: Icon_prefix + '213.png' + \"@Referer=\",\n            col_type: \"icon_small_3\"\n        });\n\nd.push({\n            title: '历史',\n            url: 'hiker://history',\n            pic_url: Icon_prefix + '192.png' + \"@Referer=\",\n            col_type: \"icon_small_3\"\n        });\n\nd.push({\n    title: \"🔍\",\n    //url: \"'hiker://search?s='+input+'&rule=宫下动漫♔'\",\n     url: \"'hiker://search?rule=\" + MY_RULE.title + \"&s='+input\",\n    col_type: \"input\",\n    desc: \"搜索你想要的影视、动漫、综艺等...\",\n});\n    d.push({\n        title: '<span style=\"color:#ff6600\"><b>\\t热搜榜\\t\\t\\t</b></span>',\n        url: \"hiker://empty\",\n        pic_url: 'https://ss1.baidu.com/6ONXsjip0QIZ8tyhnq/it/u=3779990328,1416553241&fm=179&app=35&f=PNG?w=60&h=70&s=E7951B62A4639D153293A4E90300401B',\n        col_type: 'icon_small_3'\n    });\n\n\nconst list = pdfa(html, 'body&&.art-resou&&li,2:');\nlist.forEach(item => {  \n    d.push({\n        title: pdfh(item, 'span:eq(0)&&Text') + pdfh(item, 'span:eq(1)&&Text'),\n        desc: pdfh(item, 'span:eq(2)&&Text'),\n        img: 'https://cdn-icons-png.flaticon.com/128/473/473406.png' + \"@Referer=https://img9.doubanio.com/\",\n        //url: 'hiker://search?s='+pdfh(item, 'span:eq(1)&&Text')+'&rule=宫下动漫♔',\n          url: 'hiker://search?rule=' + MY_RULE.title + '&s='+pdfh(item, 'span:eq(1)&&Text'),\n        col_type: 'avatar',\n    })\n})\n\nsetResult(d);"},{"col_type":"movie_3","name":"②一级轮播","path":"lunbo","rule":"js:\nfunction banner(title, start, arr, data, cfg) {\n    let id = title + 'lunbo';\n    var rnum = Math.floor(Math.random() * data.length);\n    var item = data[rnum];\n    putMyVar('rnum', rnum);\n    let time = 5000;\n    let col_type = 'pic_1_card';\n    let color = \"white\";\n    let desc = '';\n    if (cfg != undefined) {\n        time = cfg.time ? cfg.time : time;\n        col_type = cfg.col_type ? cfg.col_type : col_type;\n        desc = cfg.desc ? cfg.desc : desc;\n    }\n\n    arr.push({\n        col_type: col_type,\n        img: item.img,\n        desc: desc,\n        title: item.title,\n        url: item.url,\n        extra: {\n            id: id+'bar',\n        }\n    })\n\n    if (start == false || getMyVar('benstart', 'true') == 'false') {\n        unRegisterTask(id)\n        return\n    }\n    \n    //log(data)\n\n    let obj = {\n        data: data,\n    };\n\n    registerTask(id, time, $.toString((obj,id) => {\n        var data = obj.data;\n        var rum = getMyVar('rnum');\n\n        var i = Number(getMyVar('banneri', '0'));\n        if (rum != '') {\n            i = Number(rum) + 1\n            clearMyVar('rnum')\n        } else {\n            i = i + 1;\n        }\n        //log(i)\n        //log(data.length)\n\n        if (i > data.length - 1) {\n            i = 0\n        }\n        var item = data[i];\n        //log(item)\n        try {\n            updateItem(id+'bar', {\n                title: item.title,\n                img: item.img,\n                url: item.url,\n                extra: {\n                    //name: item.title.replace(/<[^>]+>/g, ''),\n                    //sname: item.extra.sname,\n                    //stype: item.extra.stype,\n                    //surl: item.url,\n                    //img:item.img,\n                    //pageTitle: item.title.replace(/<[^>]+>/g, ''),\n                }\n            })\n        } catch (e) {\n            log(e.message)\n            unRegisterTask(id)\n        }\n        putMyVar('banneri', i);\n\n    }, obj,id))\n}"},{"col_type":"movie_3","name":"①一级页面","path":"yi","rule":"function getBackImage(imgurl){\n    return /url(?:\\s+)?\\((.*?)\\)/g.exec(imgurl)[1].replace(/'|\"/gm,'');\n};\nvar Icon_prefix = 'https://hikerfans.com/tubiao/circle/';\n\n//刷新       \n       d.push({\n            title: '刷新',\n            url: $().lazyRule(() => {\n                refreshPage();\n                return 'toast://刷新成功'  \n            }),\n            pic_url: Icon_prefix + '173.png'+ \"@Referer=\",\n            col_type: \"icon_5\"\n        });\n\n//分类\n        d.push({\n            title: '分类',\n            url: 'hiker://page/shai?page=fypage#noHistory#',\n            pic_url: Icon_prefix + '158.png' + \"@Referer=\",\n            col_type: \"icon_5\"\n        });\n\n//搜索\n       d.push({\n            title: '搜索',\n            url: 'hiker://page/ss',\n            pic_url: Icon_prefix + '446.png' + \"@Referer=\",\n            col_type: \"icon_5\"\n        });\n\n//更新\n  d.push({\n            title: '更新',\n            url: 'hiker://page/gx',\n            pic_url: Icon_prefix + '399.png' + \"@Referer=\",\n            col_type: \"icon_5\"\n        });\n\n//周表\nconst fold = getMyVar('lie.group', \"1\")\nd.push({\n            title: '周表',\n            url: $('#noLoading#').lazyRule((fold) => {\n                putMyVar('lie.group', fold === '1' ? '0' : '1');\n\n                refreshPage(false);\n               return \"hiker://empty\"\n            }, fold),\n            col_type: 'icon_5',\n            pic_url: Icon_prefix + '41.png' + \"@Referer=\",\n        });\n/*\nd.push({\n            col_type: \"line\"\n        });*/\nd.push({\n            col_type: \"big_blank_block\"\n        });\n\n//轮播\nvar lundata = pdfa(html, 轮播列表).map((x) => {\n    //log(x)\n        var urll = pd(x, 轮播链接) + '#immersiveTheme#';\n    return {\n        title: pdfh(x, 轮播标题),\n        img: getBackImage(pdfh(x,轮播图片) + '@Referer='),\n        url: 'hiker://page/ej?url='+urll+'#noHistory#',\n    }\n});\neval(JSON.parse(fetch(\"hiker://page/lunbo\", {})).rule);\nbanner(MY_RULE.title, true, d, lundata, {\n        time: 5000,\n        col_type: 'card_pic_1',\n        desc: '0'\n    })\n\n"},{"col_type":"movie_3","name":"③一级周表","path":"week","rule":"//周表\nif (fold === 0) {\nd.push({ \n                col_type: \"blank_block\"\n            });\n        } else if (fold === '1') {\nvar weeks = new Array(\"周一\", \"周二\", \"周三\", \"周四\", \"周五\", \"周六\",\"周日\");\n\nfunction getWeekDate() {\n    var now = new Date();\n    var day = now.getDay();\n    var week = weeks[day];\n    //log(week)\n    return week;\n}\nlet now_Week = getWeekDate();\n//log(now_Week);\n    weeks.forEach(it => {\n        d.push({\n            title: getMyVar('week', now_Week) === it ? '☀' + '““””<b><font color=#FA7298>' + it + '</font></b>' : it.replace('周',''),\n            url: $('#noLoading##noHistory#').lazyRule((it) => {\n                putMyVar(\"week\", it);\n                refreshPage();\n                return \"hiker://empty\"\n            }, it),\n            col_type: \"scroll_button\"\n        });\n    })\n\nlet chose_week = getMyVar('week', now_Week);\nvar wkTonum = function(wk) {\n        if (/周|星期/.test(wk)) {\n            wk = wk.replace(/周|星期/, \"\")\n        }\n        var map = {\n            \"日\": 7,\n            \"一\": 1,\n            \"二\": 2,\n            \"三\": 3,\n            \"四\": 4,\n            \"五\": 5,\n            \"六\": 6\n        };\n        return map[wk]\n    }\n    let wk_num = wkTonum(chose_week);\n//log(wk_num)\nfor (var k = 1; k <= 7; k++) {\n    eval('var wk' + k + '=pdfa(html, \"#week-module-' + (k==0?0:k) + '&&.public-list-box,0:12\");');//星期列表\n    if (wk_num == k) {\n        eval('wk'+k).forEach(item => {\n            var urll = MY_HOME + pdfh(item, 'a&&href') + '#immersiveTheme#';\n            d.push({\n                title: pdfh(item, 标题),\n                desc: pdfh(item, 描述),\n                img: pd(item, 图片) + \"@Referer=\",\n                url: 'hiker://page/ej#noHistory##immersiveTheme#',\n                extra: {\n                    url: urll,\n                    title: pdfh(item, 标题),\n                    img: pd(item, 图片) + \"@Referer=\",\n                },\n                col_type: 'movie_3',\n            });\n        })\n    }    \n}\nd.push({\n                col_type: \"blank_block\"\n            });\n        }\n"},{"col_type":"movie_3","name":"④一级推荐","path":"tj","rule":"const fold1 = getMyVar('rb.group', \"1\")\nd.push({\n    title:fold1 === '1' ? '<b><span style=\"color: #f73859\">连载新番\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t🍀</span></b>' : '连载新番\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t☘️',\n    url: $('#noLoading#').lazyRule((fold1) => {\n                putMyVar('rb.group', fold1 === '1' ? '0' : '1');\n                refreshPage(false);\n                return \"hiker://empty\"\n            }, fold1),\n    pic_url: 'https://raw.fastgit.org/ls125781003/lmtubiao/main//ke/120.png',\n    col_type: \"avatar\"\n});\nif (fold1 === 0) {\nd.push({ \n                col_type: \"blank_block\"\n            });\n        } else if (fold1 === '1') {\nvar jjdm=pdfa(html, 推荐列表1);\njjdm.forEach(item => {  \nvar urll = pd(item, 链接) + '#immersiveTheme#';\n    d.push({\n        title: pdfh(item, 标题),\n        desc: pdfh(item, 描述),\n        img: pdfh(item, 图片) + \"@Referer=\",\n        url: 'hiker://page/ej#noHistory##immersiveTheme#',\n        extra: {\n             url: urll,\n             title: pdfh(item, 标题),\n             img: pd(item, 图片) + \"@Referer=\",\n                },\n        col_type: 'movie_3',\n    });\n})\n}\n\nconst fold2 = getMyVar('hj.group', \"1\")\nd.push({\n    title:fold2 === '1' ? '<b><span style=\"color: #ff847c\">完结番剧\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t🔅</span></b>' : '完结番剧\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t🔅',\n    url: $('#noLoading#').lazyRule((fold2) => {\n                putMyVar('hj.group', fold2 === '1' ? '0' : '1');\n                refreshPage(false);\n                return \"hiker://empty\"\n            }, fold2),\n    pic_url: 'https://raw.fastgit.org/ls125781003/lmtubiao/main/ke/37.png' + \"@Referer=\",\n    col_type: \"avatar\"\n});\nif (fold2 === 0) {\nd.push({ \n                col_type: \"blank_block\",\n            });\n        } else if (fold2 === '1') {\nvar jjdm=pdfa(html, 推荐列表2);\njjdm.forEach(item => {  \nvar urll = pd(item, 链接) + '#immersiveTheme#';\n    d.push({\n        title: pdfh(item, 标题),\n        desc: pdfh(item, 描述),\n        img: pdfh(item, 图片) + \"@Referer=\",\n        url: 'hiker://page/ej#noHistory##immersiveTheme#',\n        extra: {\n             url: urll,\n             title: pdfh(item, 标题),\n             img: pd(item, 图片) + \"@Referer=\",\n                },\n        col_type: 'movie_3',\n    });\n})\n}\nconst fold3 = getMyVar('hj.group', \"1\")\nd.push({\n    title:fold3 === '1' ? '<b><span style=\"color: #ff847c\">动漫剧场\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t💓</span></b>' : '动漫剧场\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t💗',\n    url: $('#noLoading#').lazyRule((fold3) => {\n                putMyVar('hj.group', fold3 === '1' ? '0' : '1');\n                refreshPage(false);\n                return \"hiker://empty\"\n            }, fold3),\n    pic_url: 'https://raw.fastgit.org/ls125781003/lmtubiao/main/ke/40.png' + \"@Referer=\",\n    col_type: \"avatar\"\n});\nif (fold3 === 0) {\nd.push({ \n                col_type: \"blank_block\",\n            });\n        } else if (fold3 === '1') {\nvar jjdm=pdfa(html, 推荐列表3);\njjdm.forEach(item => {  \nvar urll = pd(item, 链接) + '#immersiveTheme#';\n    d.push({\n        title: pdfh(item, 标题),\n        desc: pdfh(item, 描述),\n        img: pdfh(item, 图片) + \"@Referer=\",\n        url: 'hiker://page/ej#noHistory##immersiveTheme#',\n        extra: {\n             url: urll,\n             title: pdfh(item, 标题),\n             img: pd(item, 图片) + \"@Referer=\",\n                },\n        col_type: 'movie_3',\n    });\n})\n}"},{"col_type":"movie_3","name":"⑥更新页面","path":"gx","rule":"js:\nvar d = [];\nconst base_url = 'https://www.gugufan.com/index.php/map/index.html';\n\nlet true_url = getMyVar(MY_RULE.url, base_url);\nMY_URL=true_url;\nvar html=fetch(true_url)\nlog(html)\n\nd.push({\n    title:'<b><span style=\"color: #FA7298\">最近更新\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\🌸🌸🌸🌸🌸</span></b>',\n    url: \"hiker://empty\",\n    pic_url: 'https://raw.fastgit.org/ls125781003/lmtubiao/main/ke/63.png' + \"@Referer=\",\n    col_type: \"avatar\"\n});\n\nconst list = pdfa(html, 'body&&.public-list-box');\nlist.forEach(item => {  \nvar urll =pd(item, 'a&&href') + '#immersiveTheme#';\n    d.push({\n        title: pdfh(item, 'a&&title'),\n        desc: pdfh(item, '.public-list-prb&&Text'),\n        img: pdfh(item, 'img||.lazy&&data-src||data-original').split('=')[1]||pdfh(item, 'img||.lazy&&data-src||data-original') + \"@Referer=https://img9.doubanio.com/\",\n        url: 'hiker://page/ej#noHistory##immersiveTheme#',\n        extra: {url: urll},\n        col_type: 'movie_3_marquee',\n    })\n})\n\nsetResult(d);"},{"col_type":"movie_3","name":"⓵二级内容","path":"er","rule":"js:\n/*ver 20230818 1.0\n */\nvar custom = {};\n\n//预设\nfunction customData(custom) {\n    Object.keys(custom).forEach((k) => {\n        this[k] = custom[k];\n    })\n}\n\nlet Erji = {\n    通免: $('').lazyRule(() => {\n        try {\n            var html = JSON.parse(request(input).match(/r player_.*?=(.*?)</)[1])\n            var url = html.url\n            if (html.encrypt == '1') {\n                url = unescape(url);\n            } else if (html.encrypt == '2') {\n                url = unescape(base64Decode(url));\n            }\n            if (/m3u8|mp4/.test(url)) {\n                return url\n            } else {\n                return \"video://\" + input\n            }\n        } catch (e) {\n            return \"video://\" + input\n        }\n    }),\n    updata: function(rule, headers) {\n        headers = headers != undefined ? headers : {};\n        setLastChapterRule('js:' + $.toString((url, rule, headers) => {\n            var html = fetch(url, headers);\n            setResult(eval(rule))\n        }, MY_URL, rule, headers))\n    },\n    close: function(list, sorts) {\n        addListener('onClose', $.toString((list, sorts) => {\n            list.map(x => {\n                clearMyVar('er_' + x + 'fold');\n                clearMyVar('er_' + x);\n            })\n            for (let i = 0; i < sorts; i++) {\n                clearMyVar('playlist_' + i);\n            }\n            clearMyVar('er_playlists');\n        }, list, sorts))\n    },\n    dataConvert: function(data) {\n        var newclslist = data.map(function(obj) {\n            var newObj = Object.assign({}, obj);\n            if (newObj.hasOwnProperty('type')) {\n                newObj.col_type = newObj.type;\n            }\n            return newObj;\n        });\n        return newclslist;\n    },\n    preLoad: function(func) {\n        let myfunc = null\n        if (func != undefined && func.constructor == Function) {\n            myfunc = func\n        }\n        $.extend({\n            dataConvert: this.dataConvert,\n            msm: Methods.MultiSelectMode,\n            func: myfunc,\n        })\n    },\n    small: function(str, color) {\n        return '‘‘’’<small><font color=\"' + (color || '') + '\">' + str + '</font></small>';\n    },\n    声明: function() {\n        d.push({\n            title: this.small('以上数据来源于网络，如您喜欢，请支持官方！', '#871F78'),\n            desc: this.small('此规则仅限学习交流使用，请于导入后24小时内删除，任何组织或个人不得以任何方式方法传播此规则的整体或部分！', '#F20C00'),\n            url: 'hiker://empty',\n            col_type: 'text_center_1'\n        });\n    },\n\n\n//简介\n    setDesc: function(desc, num) {\n        desc = desc.constructor == Array ? desc.join('<br>') : desc;\n        if (desc.replace(/(<br>|\\s+)/g, '').length == 0) {\n            return\n        }\n        var info = storage0.getMyVar('er_info', '{}')\n        if (info['desc'] != undefined) {\n            info['desc'] = info['desc'] + ' 简介:' + desc;\n            storage0.putMyVar('er_info', info);\n        }\n\n        const mark = 'desc';\n        num = typeof(num) == 'undefined' ? 90 : num\n        desc = desc.startsWith('　　') ? desc : '　　' + desc;\n        desc = desc.replace(/'/g, \"&#39;\");\n        desc = desc.replace(/\\r\\n/g, \"<br>\");\n\n        function substr(str, maxLength) {\n            let len = 0;\n            for (let i = 0; i < str.length; i++) {\n                if (str.charCodeAt(i) > 255) {\n                    len += 2;\n                } else {\n                    len++;\n                }\n                if (len > maxLength) {\n                    return str.slice(0, i) + '...';\n                }\n            }\n            return str;\n        }\n        let sdesc = substr(desc, num);\n        var lazy = $(`#noLoading#`).lazyRule((dc, sdc, m) => {\n            var show = storage0.getItem(m, '0');\n            var title = findItem('desc').title;\n            var re = /(<\\/small><br>.*?>).+/g;\n            var exp = '展开:';\n            var ret = '收起:';\n            if (show == '1') {\n                updateItem('desc', {\n                    title: title\n                        .replace(ret, exp)\n                        .replace(re, '$1' + sdc + '</small>')\n                        .replace(/(<\\/small><br><font color=\").*?(\">)/, '$1#8A2BE2$2')//收起颜色\n\n                })\n                storage0.setItem(m, '0');\n            } else {\n                updateItem('desc', {\n                    title: title\n                        .replace(exp, ret)\n                        .replace(re, '$1' + dc + '</small>')\n                        .replace(/(<\\/small><br><font color=\").*?(\">)/, '$1#008000$2')//展开颜色\n                })\n                storage0.setItem(m, '1');\n            }\n            return `hiker://empty`\n        }, desc, sdesc, mark)\n        var sc = storage0.getItem(mark, '0') == '0' ? '展开:' : '收起:';\n        var dc = storage0.getItem(mark, '0') == '0' ? sdesc : desc;\n        d.push({\n            title: '' + '<b><font color=\"#098AC1\">∷                      剧情简介\t</font></b>' + \"<small><a style='text-decoration: none;' href='\" + lazy + \"'>\" + sc + '</a></small><br><font color=\"#8A2BE2\">' + `${dc}` + '</small>',//默认颜色\n            col_type: 'rich_text',\n            extra: {\n                id: 'desc',\n                lineSpacing: 6,\n                textSize: 15,\n                lineVisible: true,\n            }\n        })\n    },\n\n\n//海报\n    strConvert: function(arr) {\n        return arr.map(x => {\n            str = x;\n            if (/(导演|主演|类型)：/.test(str)) {\n                str = str.split('/').map((val, index) => (index === 0 ? '' : '') + val).slice(0, 5).join(' ').replace(/ $/, '');\n            }\n            return str\n        })\n    },\n    setContent: function(obj) {\n        //log(obj)\n        var contents = obj.main;\n        var sortOrder = obj.sort;\n        var img = obj.img;\n        var texts = contents.map(x => pdfh(x, 'Text'));\n\n        var array = texts.sort((a, b) => {\n            const indexA = sortOrder.indexOf(a.substr(0, 2));\n            const indexB = sortOrder.indexOf(b.substr(0, 2));\n            return indexA - indexB;\n        })\n        var regex = new RegExp('(' + sortOrder.join('|') + ')');\n        array = array.filter(function(item) {\n            return regex.test(item);\n        });\n        //log(array)\n\n        //array = sortOrder.length==0?array:this.strConvert(array);\n        array = this.strConvert(array);\n\n        if (array.length > 6) {\n            array = array.slice(0, 6);\n        }\n\n        var titles = [];\n        var descs = [];\n\n        switch (array.length) {\n            case 4:\n            case 5:\n                titles = array.slice(0, 2);\n                descs = array.slice(2);\n                break;\n            case 6:\n                titles = array.slice(0, 3);\n                descs = array.slice(3);\n                break;\n        }\n        storage0.putMyVar('er_info', {\n            desc: descs.join('\\n'),\n            img: img,\n        })\n        d.push({\n           title:  this.small( titles[0] + '\\n' +titles.slice(1, 3).join('\\n'),'red'),\n            desc: this.small(descs.join('\\n'),'#FF7F00'),\n            //title:  this.small(pdfh(html, '.video-info-items:matches(备注：|连载：|集数：|片长：)&&Text') + '\\n' + pdfh(html, '.video-info-aux&&Text'),'red'),\n          //desc: this.small(pdfh(html, '.video-info-items:contains(更新：)&&Text') + '\\n' + pdfh(html, '.video-info-items:contains(导演：)&&Text') + '\\n' + pdfh(html, '.video-info-items:contains(主演：)&&Text'),'#FF7F00'),\n            pic_url: img + '@Referer=',\n            url: MY_URL,\n            col_type: 'movie_1_vertical_pic_blur',\n        })\n        if (obj.desc != undefined) {\n            this.setDesc(obj.desc);\n        }\n    },\n    setCustom: function(obj, img) {\n        var array = [];\n        if (obj.constructor == Array) {\n            array = obj;\n        }\n        array = this.strConvert(array);\n        var titles = [];\n        var descs = [];\n        switch (array.length) {\n            case 4:\n            case 5:\n                titles = array.slice(0, 2);\n                descs = array.slice(2);\n                break;\n            case 6:\n                titles = array.slice(0, 3);\n                descs = array.slice(3);\n                break;\n        }\n        storage0.putMyVar('er_info', {\n            desc: descs.join('\\n'),\n            img: img,\n        })\n        d.push({\n            title: titles[0] + '\\n' + this.small(titles.slice(1, 3).join('\\n')),\n            desc: this.small(descs.join('\\n')),\n            pic_url: img + '@Referer=',\n            url: MY_URL,\n            col_type: 'movie_1_vertical_pic_blur',\n        })\n    },\n    isColor: function(text) {\n        const regex = /^#([0-9A-Fa-f]{3}|[0-9A-Fa-f]{6})$|^([a-z]+)$/i;\n        return regex.test(text);\n    },\n    getPreset: function(custom) {\n        if (typeof customdata == 'object' && !custom) {\n            custom = customdata;\n        } else {\n            custom = custom ? custom : {}\n        }\n        custom.正序颜色 = (custom.正序颜色 && this.isColor(custom.正序颜色)) ? custom.正序颜色 : '#1AAD19';\n        custom.逆序颜色 = (custom.逆序颜色 && this.isColor(custom.逆序颜色)) ? custom.逆序颜色 : '#FF0000';\n        custom.图标 = custom.图标 ? custom.图标 : 'https://i2.100024.xyz/2023/06/10/h4z627.webp';\n        custom.线路选中 = custom.线路选中 ? custom.线路选中 : '#008B8B';\n        custom.线路样式 = custom.线路样式 ? custom.线路样式 : 'scroll_button';\n        custom.分割样式 = custom.分割样式 ? custom.分割样式 : 'blank_block';\n        return custom;\n    },\n    createPList: function(tabs, vari, shsort, custom) {\n        vari = \"er_\" + vari;\n        for (var i = 0; i < tabs.length; i++) {\n            var url = $('#noLoading#').lazyRule((vari, shsort, i, linec) => {\n\n                var lists = storage0.getMyVar(shsort + '_list', '[]');\n\n                if (getMyVar(vari + 'fold', '1') == '0') {\n                    var btn = findItem(shsort + '_button');\n                    var folds = ['<font color=\"#D3D3D3\">☷', '<font color=\"#FFA500\">☰'];\n                    var plist = storage0.getMyVar('er_playlists', '{}');\n                    \n                    var col = plist[shsort].col_type;\n                    var cls = plist[shsort].cls;\n                    var pic = plist[shsort].pic;\n                    var extra = plist[shsort].extra;\n                    //log(extra)\n                    updateItem(btn.extra.id, {\n                        title: btn.title.replace(folds[0], folds[1]),\n                    })\n\n                    putMyVar(vari + 'fold', '1');\n                    //return 'toast://展开才能操作';\n                } else {\n                    var plist = storage0.getMyVar('er_playlists', '{}');\n                    \n                    var col = plist[shsort].col_type;\n                    var cls = plist[shsort].cls;\n                    var pic = plist[shsort].pic;\n                    var extra = plist[shsort].extra;\n                    //log(extra)\n                }\n                putMyVar(vari, i);\n\n                var xlist = lists[i];\n                if ($.func != undefined && $.func.constructor == Function) {\n                    xlist = $.func(i);\n                    storage0.putMyVar(shsort + '_list', xlist);\n                }\n                var plays = xlist.map(x => {\n                    return {\n                        title: x.title,\n                        url: x.url,\n                        col_type: col,\n                        pic: pic,\n                        extra: Object.assign({},extra,{\n                            id: x.url.replace(/@lazyRule[\\s\\S]+/g, ''),\n                            cls: cls,\n                        })                                                                     \n                    }\n                })\n                if (getMyVar(shsort + '_sort') == '1') {\n                    plays.reverse();\n                }\n                var pcfg = storage0.getMyVar(shsort + '_pushcfg', '{}');\n                if (pcfg['单推']) {\n                    updateItem(shsort + '_push', {\n                        title: pcfg['obj']['单推'][0]\n                    })\n                    pcfg['单推'] = false;\n                }\n                if (pcfg['选推']) {\n                    updateItem(shsort + '_pushs', {\n                        title: pcfg['obj']['选推'][0]\n                    })\n                    pcfg['选推'] = false;\n                }\n                storage0.putMyVar(shsort + '_pushcfg', pcfg);\n                deleteItemByCls(shsort);\n                addItemAfter(shsort + '_line', plays);\n\n                var tabx = findItemsByCls(shsort + '_tab');\n                tabx.forEach((x, ii) => {\n                    var title = x.title;\n                    if (i == ii) {\n                        updateItem(x.extra.id, {\n                            title: title.replace(/#(\\w+)?/g, linec),\n                        })\n                    } else {\n                        updateItem(x.extra.id, {\n                            title: title.replace(/#(\\w+)?/g, '#'),\n                        })\n                    }\n                })\n                return 'toast://切换成功！';\n            }, vari, shsort, i, custom.线路选中)\n            d.push({\n                title: '““””' + (getMyVar(vari, '0') == i ? tabs[i].fontcolor(custom.线路选中) : tabs[i].fontcolor('#')),\n                url: url,\n                col_type: custom.线路样式,\n                extra: {\n                    cls: shsort + '_tab',\n                    id: shsort + '_tab_' + i,\n                }\n            })\n        }\n        d.push({\n            col_type: custom.分割样式,\n            extra: {\n                id: shsort + '_line',\n            }\n        })\n    },\n    pushTab: function(vari, shsort) {\n        addListener('onRefresh', $.toString((shsort) => {\n            clearMyVar(shsort + '_pushcfg');\n            clearMyVar(shsort + '_duoselect');\n        }, shsort))\n        var pobj = {\n            '单推': ['⦿单推', '<b>⦿单推</b>'.fontcolor('#00FA9A')],\n            '选推': ['☑选推', '<b>☑选推</b>'.fontcolor('#4682B4')],\n        }\n\n        d.push({\n            title: '⌘',\n            col_type: 'scroll_button',\n            url: 'hiker://empty',\n            extra: {\n                cls: shsort + '_pushtab',\n            }\n        }, {\n            title: pobj['单推'][0],\n            col_type: 'scroll_button',\n            url: $('#noLoading#').lazyRule((shsort, pobj, vari) => {\n                if (getMyVar(vari + 'fold', '1') == '0') {\n                    return 'toast://展开才能操作';\n                }\n\n                var titles = pobj['单推'];\n                var pcfg = storage0.getMyVar(shsort + '_pushcfg', '{}');\n                pcfg['obj'] = pobj;\n                var 单推 = pcfg['单推'] ? pcfg['单推'] : false;\n\n                if (单推) {\n                    updateItem(shsort + '_push', {\n                        title: titles[0],\n                    })\n                    pcfg['单推'] = false;\n                    pcfg['playlist'].map((x) => {\n                        updateItem(x.extra.id, {\n                            url: x.url,\n                        })\n                    })\n                } else {\n                    updateItem(shsort + '_push', {\n                        title: '““””' + titles[1],\n                    })\n                    updateItem(shsort + '_pushs', {\n                        title: pobj['选推'][0],\n                    })\n                    pcfg['单推'] = true;\n                    pcfg['选推'] = false;\n                    var playlist = findItemsByCls(shsort);\n                    pcfg['playlist'] = playlist;\n                    findItemsByCls(shsort).map(x => {\n                        var dpush = {\n                            name: getPageTitle(),\n                            url: x.title + '$' + x.extra.id\n                        }\n                        updateItem(x.extra.id, {\n                            url: $('').lazyRule((dpush) => {\n                                return 'hiker://page/push?rule=XYQ推送&pushurl=' + encodeURIComponent(JSON.stringify(dpush));\n                            }, dpush)\n                        })\n                    })\n                }\n                storage0.putMyVar(shsort + '_pushcfg', pcfg);\n                return 'toast://' + (单推 ? '单推开启' : '单推关闭');\n            }, shsort, pobj, vari),\n            extra: {\n                id: shsort + '_push',\n                cls: shsort + '_pushtab',\n            }\n        }, {\n            title: pobj['选推'][0],\n            col_type: 'scroll_button',\n            url: $('#noLoading#').lazyRule((shsort, pobj, vari) => {\n                if (getMyVar(vari + 'fold', '1') == '0') {\n                    return 'toast://展开才能操作';\n                }\n                var titles = pobj['选推'];\n                var pcfg = storage0.getMyVar(shsort + '_pushcfg', '{}');\n                pcfg['obj'] = pobj;\n                var 选推 = pcfg['选推'] ? pcfg['选推'] : false;\n                if (选推) {\n                    updateItem(shsort + '_pushs', {\n                        title: titles[0],\n                    })\n                    pcfg['选推'] = false;\n                    pcfg['playlist'].map((x) => {\n                        updateItem(x.extra.id, {\n                            title: x.title,\n                            url: x.url,\n                        })\n                    })\n                    updateItem(shsort + '_pushto', {\n                        title: '推送本页=>TVBox',\n                    });\n                    clearMyVar(shsort + '_duoselect');\n                } else {\n                    updateItem(shsort + '_pushs', {\n                        title: '““””' + titles[1],\n                    })\n                    pcfg['选推'] = true;\n                    pcfg['单推'] = false;\n                    var playlist = findItemsByCls(shsort);\n                    pcfg['playlist'] = playlist;\n                    let Ids = playlist.map(it => it.extra.id);\n                    Ids.forEach(x => {\n                        var title = findItem(x).title;\n                        updateItem(x, {\n                            url: $.msm(title, x, shsort),\n                        });\n                    });\n                    updateItem(shsort + '_push', {\n                        title: pobj['单推'][0],\n                    })\n                    updateItem(shsort + '_pushto', {\n                        title: '推送选中=>TVBox',\n                    });\n                }\n                storage0.putMyVar(shsort + '_pushcfg', pcfg);\n                return 'toast://' + (选推 ? '选推开启' : '选推关闭');\n            }, shsort, pobj, vari),\n            extra: {\n                id: shsort + '_pushs',\n                cls: shsort + '_pushtab'\n            }\n        }, {\n            title: \"推送本页=>TVBox\",\n            col_type: 'scroll_button',\n            url: $('#noLoading#').lazyRule((shsort, vari) => {\n                var pcfg = storage0.getMyVar(shsort + '_pushcfg', '{}');\n                var 单推 = pcfg['单推'] ? pcfg['单推'] : false;\n                var 选推 = pcfg['选推'] ? pcfg['选推'] : false;\n                if (!单推 && !选推) {\n                    var tabs = storage0.getMyVar(shsort + '_tabs', '[]');\n                    try {\n                        var pls = storage0.getMyVar(shsort + '_list', '[]').map(li => {\n                            return li.map(item => item.title + '$' + item.url.replace(/@lazyRule[\\s\\S]+/g, '')).join('#')\n                        }).join('$$$');\n                    } catch {\n                        var pls = storage0.getMyVar(shsort + \"_list\", '[]').map(x => x.title + \"$\" + x.url).join(\"#\");\n                        var tabs = [tabs[getMyVar(vari, '0')]];\n                    }\n                    /*log(pls)\n                    log(tabs)*/\n                }\n                if (选推) {\n                    var pls = storage0.getMyVar(shsort + \"_duoselect\", '[]').map(x => x.title + \"$\" + x.url).join(\"#\");\n                    if (pls.length == 0) {\n                        return 'toast://选择为空';\n                    }\n                    var tabs = ['播放列表'];\n                }\n\n                var info = storage0.getMyVar('er_info', '{}');\n                var desc = info['desc'];\n                var 推送 = {\n                    \"name\": getPageTitle(),\n                    \"content\": desc || '',\n                    \"pic\": info['img'] || '',\n                    \"from\": tabs.join('$$$'),\n                    \"url\": pls,\n                }\n                //log(推送)\n                return \"hiker://page/push?rule=XYQ推送&pushurl=\" + encodeURIComponent(JSON.stringify(推送))\n            }, shsort, vari),\n            extra: {\n                id: shsort + '_pushto',\n                cls: shsort + '_pushtab'\n            }\n        }, {\n            col_type: 'blank_block',\n            extra: {\n                cls: shsort + '_pushtab',\n            }\n        })\n    },\n    setLongclick: function(shsort, custom) {\n        return [{\n            title: '样式🎨',\n            js: $.toString((shsort) => {\n                let all_cols = [''].concat(getColTypes());\n                all_cols = all_cols.filter(x =>\n                    /(text_|flex).*/.test(x) && x != 'text_icon');\n                //log(all_cols)\n                let cls = storage0.getMyVar('er_playlists', '{}') ||\n                    '';\n                if (cls[shsort] != '') {\n                    col = cls[shsort].col_type;\n                }\n                let 按钮样式 = all_cols.map((it) => {\n                    return it === col ? '👉' + it : it;\n                });\n                let tips = '请选择选集按钮样式';\n                return $(按钮样式, 2, tips).select((shsort, cls) => {\n                    input = input.replace(/👉/g, '');\n                    /*storage0.setItem('按钮样式', input);*/\n                    let oldIds = (findItemsByCls(shsort) || []).map(it => it.extra.id); //老元素ids\n                    oldIds.forEach(x => {\n                        updateItem(x, {\n                            col_type: input\n                        });\n                    });\n                    return 'toast://已切换选集按钮样式为:' + input;\n                }, shsort, cls);\n            }, shsort, custom)\n        }]\n    },\n    setTabs: function(tabs, vari, shsort, parse) {\n        let custom = parse.自定义;\n        custom = this.getPreset(custom);\n        shsort = shsort ? shsort : 'shsort';\n        var title = (getMyVar(shsort + '_sort', '0') == '1') ? '<b><span style=\"color: ' + custom.逆序颜色 + '\">逆序</span></b>' : '<b><span style=\"color: ' + custom.正序颜色 + '\">正序</span></b>'\n        d.push({\n            title: vari + ':' + title,\n            desc: '共' + String(tabs.length).fontcolor('#4682B4') + '条线路',\n            url: $('#noLoading#').lazyRule((shsort, vari, custom) => {\n                let conf = getMyVar(shsort + '_sort', '0');\n                if (getMyVar('er_' + vari + 'fold', '1') == '0') {\n                    return 'toast://展开才能操作';\n                }\n                var clslists = findItemsByCls(shsort);\n                var newclslist = $.dataConvert(clslists);\n\n                var titles = [`${custom.正序颜色}\">正序`, `${custom.逆序颜色}\">逆序`];\n\n                deleteItemByCls(shsort);\n                newclslist.reverse();\n                addItemAfter(shsort + '_line', newclslist);\n\n                var obj = findItem(shsort + '_avatar')\n\n                if (conf == '1') {\n                    updateItem(shsort + '_avatar', {\n                        title: obj.title.replace(titles[1], titles[0]),\n                    })\n                    putMyVar(shsort + '_sort', '0');\n                } else {\n                    updateItem(shsort + '_avatar', {\n                        title: obj.title.replace(titles[0], titles[1]),\n                    })\n                    putMyVar(shsort + '_sort', '1');\n                }\n                return 'toast://切换排序成功';\n            }, shsort, vari, custom),\n            col_type: 'avatar',\n            img: custom.图标,\n            extra: {\n                id: shsort + '_avatar',\n                longClick: this.setLongclick(shsort),\n            }\n        })\n        var 折叠 = '““””<b>' + '☷'.fontcolor(\"#D3D3D3\");\n        var 展开 = '““””<b>' + '☰'.fontcolor(\"#FFA500\");\n        var foldname = 'er_' + vari + 'fold';\n        var fold = getMyVar(foldname, '1');\n        if (typeof(parse['推送']) != 'undefined' && parse['推送'])\n            this.pushTab('er_' + vari, shsort);\n\n        d.push({\n            title: fold === '0' ? 折叠 : 展开,\n            col_type: custom.线路样式,\n            url: $('#noLoading#').lazyRule((foldname, shsort) => {\n                var fold = getMyVar(foldname, '1');\n                var obj = findItem(shsort + '_line');\n                var btn = findItem(shsort + '_button');\n                var folds = ['<font color=\"#D3D3D3\">☷', '<font color=\"#FFA500\">☰'];\n\n                if (fold == '0') {\n                    putMyVar(foldname, '1');\n                    var cs = storage0.getMyVar(shsort + '_cls');\n                    addItemAfter(obj.extra.id, cs);\n                    updateItem(btn.extra.id, {\n                        title: btn.title.replace(folds[0], folds[1]),\n                    })\n                }\n                if (fold == '1') {\n                    putMyVar(foldname, '0');\n                    var pcls = findItemsByCls(shsort);\n                    var cx = $.dataConvert(pcls);\n                    storage0.putMyVar(shsort + '_cls', cx);\n                    deleteItemByCls(shsort);\n                    updateItem(btn.extra.id, {\n                        title: btn.title.replace(folds[1], folds[0]),\n                    })\n                }\n\n                return 'toast://' + (fold === '1' ? '收起' : '展开');\n            }, foldname, shsort),\n            extra: {\n                id: shsort + '_button',\n            }\n        })\n        this.createPList(tabs, vari, shsort, custom);\n    },\n    setTabs2: function(tabs, vari, shsort, parse, exp) {\n        let custom = parse.自定义;\n        custom = this.getPreset(custom);\n\n        shsort = shsort ? shsort : 'shsort';\n        var title = (getMyVar(shsort + '_sort', '0') == '1') ? '<b><span style=\"color:' + custom.逆序颜色 + '\">逆序</span></b>' : '<b><span style=\"color:' + custom.正序颜色 + '\">正序</span></b>'\n\n        var 折叠 = '<b>折叠' + '☷'.fontcolor(\"#D3D3D3\");\n        var 展开 = '<b>展开' + '☰'.fontcolor(\"#FFA500\");\n        var foldname = 'er_' + vari + 'fold';\n        var fold = getMyVar(foldname, '1');\n\n        var url = $('#noLoading#').lazyRule((foldname, shsort, push) => {\n            var pl = storage0.getMyVar('er_playlists', '{}');\n            if (Object.keys(pl).length == 1) {\n                return 'hiker://empty'\n            }\n\n            var fold = getMyVar(foldname, '1');\n            var obj = findItem(shsort + '_avatar')\n            if (fold == '1') {\n                var bcls = findItem(shsort + '_button');\n                var tcls = findItemsByCls(shsort + '_tab');\n                var lcls = findItem(shsort + '_line');\n\n                var pcls = findItemsByCls(shsort);\n                var cs = [bcls].concat(tcls, [lcls], pcls);\n\n                if (push) {\n                    var pcls = findItemsByCls(shsort + '_pushtab');\n                    cs = pcls.concat(cs);\n                }\n\n                var cx = $.dataConvert(cs);\n                storage0.putMyVar(shsort + '_cls', cx);\n                if (push) {\n                    deleteItemByCls(shsort + '_pushtab');\n                }\n                deleteItem(bcls.extra.id);\n                deleteItemByCls(shsort + '_tab');\n                deleteItem(shsort + '_line');\n                deleteItemByCls(shsort);\n\n                updateItem(obj.extra.id, {\n                    desc: obj.desc.replace('展开<font color=\"#FFA500\">☰', '折叠<font color=\"#D3D3D3\">☷'),\n                })\n            }\n            if (fold == '0') {\n                var cs = storage0.getMyVar(shsort + '_cls');\n                addItemAfter(shsort + '_avatar', cs);\n                updateItem(obj.extra.id, {\n                    desc: obj.desc.replace('折叠<font color=\"#D3D3D3\">☷', '展开<font color=\"#FFA500\">☰'),\n                })\n            }\n            putMyVar(foldname, fold === '1' ? '0' : '1');\n            return 'toast://' + (fold === '1' ? '收起' : '展开');\n        }, foldname, shsort, (parse['推送'] ? true : false));\n        var desc = (fold === '0' ? 折叠 : 展开) + '\\t';\n\n        if (exp.length == 1) {\n            url = 'hiker://empty';\n            desc = '';\n        }\n        d.push({\n            title: vari + ':\\t\\t' + '共' + String(tabs.length).fontcolor('#4682B4') + '条线路',\n            desc: desc,\n            col_type: 'avatar',\n            img: custom.图标,\n            url: url,\n            extra: {\n                id: shsort + '_avatar',\n                longClick: this.setLongclick(shsort),\n            }\n        })\n        if (typeof(parse['推送']) != 'undefined' && parse['推送'])\n            this.pushTab('er_' + vari, shsort);\n\n        if (fold == '0') {\n            return\n        }\n\n        d.push({\n            title: '““””' + title,\n            url: $('#noLoading#').lazyRule((vari, shsort, custom) => {\n                let conf = getMyVar(shsort + '_sort', '0');\n                var clslists = findItemsByCls(shsort);\n                var newclslist = $.dataConvert(clslists);\n                deleteItemByCls(shsort);\n                newclslist.reverse();\n                addItemAfter(shsort + '_line', newclslist);\n\n                var obj = findItem(shsort + '_button')\n                var titles = [`${custom.正序颜色}\">正序`, `${custom.逆序颜色}\">逆序`];\n\n                if (conf == '1') {\n                    updateItem(shsort + '_button', {\n                        title: obj.title.replace(titles[1], titles[0]),\n                    })\n                    putMyVar(shsort + '_sort', '0');\n                } else {\n                    updateItem(shsort + '_button', {\n                        title: obj.title.replace(titles[0], titles[1]),\n                    })\n                    putMyVar(shsort + '_sort', '1');\n                }\n                //refreshPage()\n                return 'toast://切换排序成功'\n            }, vari, shsort, custom),\n            col_type: custom.线路样式,\n            extra: {\n                id: shsort + '_button',\n            }\n        })\n        this.createPList(tabs, vari, shsort, custom);\n    },\n    setLists: function(lists, index, shsort, parse) {\n\n        storage0.putMyVar(shsort + '_list', lists);\n\n        parse = parse ? parse : {};\n        var 样式 = parse.样式 ? parse.样式 : '';\n        var 图标 = parse.图标 ? parse.图标 : 'https://hikerfans.com/tubiao/movie/13.svg';\n        var ajax = parse.Ajax ? parse.Ajax : false;\n\n        shsort = shsort ? shsort : 'shsort';\n\n        if (ajax) {\n            var list = lists;\n            if (getMyVar(shsort + '_sort') == '1' && lists.length > 0) {\n                list = lists.reverse();\n            }\n        } else {\n            var list = lists[index];\n            if (getMyVar(shsort + '_sort') == '1' && lists.length > 0) {\n                list = lists[index].reverse();\n            }\n        }\n\n        if (样式 == '') {\n            样式 = list.length > 3 ? 'text_4' : 'text_2'\n        }\n        \n        var extra = '';\n\n        if (parse.extra != undefined) {\n            extra = parse.extra\n        }\n\n        if (list.length > 0) {\n            var plist = storage0.getMyVar('er_playlists', '{}');\n            if (!plist.hasOwnProperty(shsort)) {\n                plist[shsort] = {};\n            }\n            plist[shsort]['cls'] = shsort;\n            plist[shsort]['col_type'] = 样式;\n            plist[shsort]['pic'] = 图标; \n            plist[shsort]['extra']=extra;           \n            storage0.putMyVar('er_playlists', plist);\n        }\n        \n\n        for (var j in list) {\n            let lt = {\n                title: list[j].title,\n                url: list[j].url,\n                col_type: 样式,\n                pic: 图标,\n                extra: {\n                    id: list[j].url.replace(/@lazyRule[\\s\\S]+/g, ''),\n                    cls: shsort,             \n                }\n            };\n            lt['extra'] = Object.assign({}, lt['extra'], extra);\n            d.push(lt);\n        }\n    },\n    evalRe: function(input, 函数) {\n        let result = input;\n        result = eval('input' + 函数);\n        return result;\n    },\n    getTabs: function(parse) {\n        var tabs = [];\n        var arts = [];\n        if (typeof parse.线路 == 'object') {\n            arts = parse.线路;\n        }\n        if (arts.length == 0) {\n            arts = pdfa(html, parse.线路);\n        }\n        var 线路名 = parse.线路名称;\n        var 替换函数 = '';\n        if (parse.线路名称.includes('@@')) {\n            线路名 = parse.线路名称.split('@@')[0];\n            替换函数 = parse.线路名称.split('@@')[1];\n        }\n        for (var i in arts) {\n            let linename = '';\n            if (线路名 == '') {\n                linename = arts[i];\n            } else {\n                linename = pdfh(arts[i], 线路名);\n            }\n            if (替换函数 != '') {\n                linename = this.evalRe(linename, 替换函数);\n            }\n            tabs.push(linename);\n        }\n        return tabs;\n    },\n    getLists: function(parse, shsort) {\n        shsort = shsort ? shsort : 'shsort';\n        var lists = [];\n        var conts = [];\n        if (typeof parse.选集 == 'object') {\n            conts = parse.选集;\n        }\n        if (conts.length == 0) {\n            try {\n                conts = pdfa(html, parse.选集);\n            } catch {\n                toast('选集定位有误')\n            }\n        }\n\n        let 替换函数 = '';\n        var 选集名称 = parse.选集名称 ? parse.选集名称 : 'a&&Text';\n        if (选集名称.includes('@@')) {\n            选集名称 = parse.选集名称.split('@@')[0];\n            替换函数 = parse.选集名称.split('@@')[1];\n        }\n\n        var 选集链接 = parse.选集链接 ? parse.选集链接 : 'a&&href';\n        var 解析 = parse.解析 ? parse.解析 : '';\n        var temp = [];\n\n        for (var i in conts) {\n            if (parse.选集列表 != undefined) {\n                if (parse.选集列表 == 'object') {\n                    lists.push(conts[i].map(x => {\n                        return {\n                            title: x.title,\n                            url: x.url + 解析,\n                        }\n                    }))\n                } else {\n                    lists.push(pdfa(conts[i], parse.选集列表).reverse().map(x => {\n                        return {\n                            title: pdfh(x, 选集名称),\n                            url: pd(x, 选集链接) + 解析,\n                        }\n                    }))\n                }\n            } else {\n                var url = pd(conts[i], 选集链接);\n                if (!选集链接.includes('href')) {\n                    url = pdfh(conts[i], 选集链接);\n                }\n                let title = pdfh(conts[i], 选集名称);\n                title = 替换函数 != '' ? this.evalRe(title, 替换函数) : title;\n                temp.push({\n                    title: title,\n                    url: url + 解析,\n                })\n            }\n        }\n        let 倒序 = parse.倒序 ? parse.倒序 : false;\n        var results = lists.length ? lists : [temp];\n        if (倒序) {\n            results = results.map(x => x.reverse());\n        }\n        var plist = storage0.getMyVar('er_playlists', '{}');\n        if (results.some(x => x.length > 0)) {\n            if (!plist.hasOwnProperty(shsort)) {\n                plist[shsort] = {};\n            }\n            plist[shsort]['length'] = results.length;\n        };\n        storage0.putMyVar('er_playlists', plist);\n        return results;\n    },\n    getPlayers: function(parse, mode, func) {\n        //log(mode)\n        var play = 'er_playlist_';\n        this.preLoad(func);\n        this.close(parse.map(x => x.类型), parse.length);\n        mode = mode ? mode : 1;\n\n        let pe = [1];\n        try {\n            pe = parse.map(x => pdfa(html, x.线路).length).filter(y => y > 0);\n        } catch {}\n\n\n        parse.forEach((item, i) => {\n            var tabs = ['主线'];\n            if (item.线路 != undefined) {\n                tabs = this.getTabs(item);\n            }\n            putMyVar(play + i + '_tabs', tabs);\n            if (item.Ajax) {\n                if (mode == 1) {\n                    this.setTabs(tabs, item.类型, play + i, item);\n                } else {\n                    this.setTabs2(tabs, item.类型, play + i, item, pe);\n                }\n                putMyVar('er_html', html);\n                putMyVar('er_url', MY_URL);\n\n                var lists = func(getMyVar('er_' + item.类型, '0'), MY_URL);\n            } else {\n                var lists = this.getLists(item, play + i);\n\n\n                if (lists.some(x => x.length > 0)) {\n                    if (mode == 1) {\n                        this.setTabs(tabs, item.类型, play + i, item);\n                    } else {\n                        this.setTabs2(tabs, item.类型, play + i, item, pe);\n                    }\n                }\n            }\n            if (getMyVar('er_' + item.类型 + 'fold', '1') == '1') {\n                this.setLists(lists, getMyVar('er_' + item.类型, '0'), play + i, item);\n            }\n            d.push({\n                col_type: 'blank_block'\n            })\n        })\n    }\n}\n\n\nlet Methods = {\n    //多选模块\n    MultiSelectMode: function(name, id, shsort) {\n        return $('#noLoading#').lazyRule((datatitle, dataurl, shsort) => {\n            function unique(arr) {\n                const res = new Map()\n                return arr.filter((a) => !res.has(a.url) && res.set(a.url, 1))\n            }\n            let duoselect = storage0.getMyVar(shsort + \"_duoselect\") ? storage0.getMyVar(shsort + \"_duoselect\") : [];\n            if (duoselect.findIndex(x => x.url === dataurl) == -1) {\n                duoselect.push({\n                    title: datatitle,\n                    url: dataurl\n                })\n                duoselect = unique(duoselect)\n                updateItem(dataurl, {\n                    title: `““””<span style=\"color:#FF5733\">` + datatitle,\n                });\n            } else {\n                function removeByValue(arr, val) {\n                    for (var i = 0; i < arr.length; i++) {\n                        if (arr[i]['url'] == val) {\n                            arr.splice(i, 1);\n                            break;\n                        }\n                    }\n                }\n                removeByValue(duoselect, dataurl)\n                updateItem(dataurl, {\n                    title: datatitle\n                });\n            }\n            storage0.putMyVar(shsort + \"_duoselect\", duoselect);\n            return \"hiker://empty\"\n        }, name, id, shsort)\n    },\n}"},{"col_type":"movie_3","name":"⓷二级搜索","path":"tool","rule":"//var title = parseDomForHtml(html, 搜索标签);\nvar title = MY_PARAMS.title;\nlog(title)\nd.push({\n    title: '‘‘’’<b><middle><font color=\"#FF0000\"> 云盘君.推</font></middle>',\n    pic_url: 'http://image.coolapk.com//apk_logo/2022/0507/14/0_3828_7254_639@260x260.png.t.png',\n    url: 'hiker://search?s=' + title + '&rule=云盘君(推送)',\n    col_type: 'icon_small_4',\n});\nd.push({\n    title: '‘‘’’<b><middle><font color=\"#1E90FF\"> 聚影√</font></middle>',\n    pic_url: 'http://image.coolapk.com/apk_logo/2021/0721/10/bb5c6d59a9e36159834b3f19fc749df5-285107-o_1fb3ftl3gcst1sdt1n3b1m2unjd18-uid-662435@360x360.png',\n    url: 'hiker://search?s=' + title + '&rule=聚影√',\n    col_type: 'icon_small_4',\n});\nd.push({\n    title: '‘‘’’<b><middle><font color=\"#FF8C00\"> 聚阅√</font></middle>',\n    pic_url: 'http://static.yingyonghui.com/icon/128/6863447.png',\n    url: 'hiker://search?s=' + title + '&rule=聚阅√',\n    col_type: 'icon_small_4',\n});\nd.push({\n    title: '‘‘’’<b><middle><font color=\"#00FF00\"> 云盘君.简</font></middle>',\n    pic_url: 'http://static.yingyonghui.com/icon/128/7000478.png',\n    url: 'hiker://search?s=' + title + '&rule=云盘君.简',\n    col_type: 'icon_small_4',\n});"},{"col_type":"movie_3","name":"⑧筛选页面","path":"shai","rule":"js:\nvar d = [];\nconst base_url = 'https://www.gugufan.com/index.php/vod/show/id/6.html';\n\nlet true_url = getMyVar(MY_RULE.url, base_url);\nconst page = MY_PAGE;\nMY_URL=true_url;\nvar html=fetch(true_url)\n//log(html)\n\nvar getRangeColors = function() {       \n    return '#' + ('00000' + (Math.random() * 0x1000000 << 0).toString(16)).substr(-6);     \n}\n//动态分类定义 \nconst 分类颜色 = getRangeColors();\n\nvar 大类定位 = typeof(大类定位) != 'undefined' ? 大类定位 : '.ec-casc-list&&ul,0:1';\n//log(大类定位)\nvar 大类标题 = typeof(大类标题) != 'undefined' ? 大类标题 : 'a&&Text';\nconst 大类链接 = 'a&&href';\nvar 拼接分类 = typeof(拼接分类) != 'undefined' ? 拼接分类 : 'body&&.nav-swiper:not(:has(:matches(资源|版本|频道))):has(li:nth-child(n+2))';\nconst 小类定位 = 'body&&li;body&&a';\nconst 分类标题 = 'a&&Text';\nconst 分类链接 = 'li&&data-type@@@li&&data-val';\nconst 开启搜索 = true;\nlet 开启折叠= false;\nconst 清除键 = ['dt_class', 'dt_area', 'dt_year', 'dt_lang', 'dt_letter', 'dt_time', 'dt_version', 'dt_state'];\n\nconst 附加定位 = [{\n    一级定位: '.site-tabs',\n    小类: 'body&&a',\n    标题: 'a&&Text',\n    链接: 'time@@a&&data-type',\n    转换: true,\n}]\n\nvar html = request(true_url.replace('hiker://empty##', ''))\n\neval(JSON.parse(request('hiker://page/yj')).rule);\n\n\ntype = pdfh(html, '#dataList&&data-type');\ntime = '' + Math.ceil(new Date().getTime() / 1000);\n//key = evalPrivateJS('ZMNKQE5w4HUpWH6GG0ruk+vFxGRxkgJWuahpB85warDDaR3wy9NDjNapsZkYZZhV');\nkey = md5(\"DS\" + time + \"DCC147D11943AF75\");\n\nvar result = post(getHome(MY_URL) + \"/index.php/api/vod\", {\n    headers: {\n        Referer: MY_URL,\n    },\n    body: {\n        type: type,\n        page: page,\n        time: time,\n        key: key,\n        class: getMyVar('dt_class', ''),\n        area: getMyVar('dt_area', ''),\n        year: getMyVar('dt_year', ''),\n        lang: getMyVar('dt_lang', ''),\n        letter: getMyVar('dt_letter', ''),\n        state: getMyVar('dt_state', ''),\n        version: getMyVar('dt_version', ''),\n        by: getMyVar('dt_time', ''),\n\n    }\n})\n\nvar list=JSON.parse(result).list\nlist.forEach(item => {  \nvar urll ='https://www.gugufan.com//index.php/vod/detail/id/'+item.vod_id+'.html' + '#immersiveTheme#';\nvar img = item.vod_pic.replace(/^mac/,'https');\nif(/^upload/.test(img)) {\n          img = 'https://www.gugufan.com/' + img;    \n            } else {\n          img = img;\n            };\n    d.push({\n        title: item.vod_name,\n        desc: item.vod_remarks,\n        img: img,\n        url: 'hiker://page/ej#noHistory##immersiveTheme#',\n        extra: {\n            url: urll,\n            title: item.vod_name,\n            img: img,\n               },\n        col_type: 'movie_3',\n    })\n})\n\nsetResult(d);"},{"col_type":"movie_3","name":"⑦筛选分类","path":"yj","rule":"js:\n/*\nVer 2023-6-18 1.0\n备注：不要用海阔代码格式化 内容会出错\n必须参数：\n分类颜色 大类定位 \n小类定位 分类标题 分类链接\nhtml =>源码 page =>页码\n可选参数：\n拼接分类 折叠标记 展开标记 排除\n大类链接 大类标题 清除键 开启折叠\n附加定位\n说明：\n外面用getMyVar(MY_RULE.url) 或者 状态 取链接\n魔改:α\n*/\n\nlet empty  = \"hiker://empty\";\r\nlet categories = [];\r\nif (typeof(拼接分类) != 'undefined' && 拼接分类 != ''){\r\n    categories = [pdfa(html, 大类定位).join('\\n')].concat(pdfa(html,  拼接分类));\n    if(typeof(附加定位)!='undefined' && 附加定位.length>0){\n            附加定位.forEach(x=>{\n      var 一级=pdfa(html,x.一级定位).map(s=>{\n          var 定位=pdfa(s,x.小类).map(q=>{\n              var title=pdfh(q,x.标题);\n              var url='a'\n              if(x.链接.includes('@@')){                  \n                  state=x.链接.split('@@')[0]\n                  value=pdfh(q,x.链接.split('@@')[1]);\n                  if(x.转换==true){\n                      return `<li data-type=\"${state}\" data-val=\"${value}\"><a href=\"\">${title}</a></li>`\n                  }else{\n                      return `<a type=\"@extra\" state=\"${state}\" value=\"${value}\">${title}</a>`;\n                  }\n              }else{\n                  href=pd(q,x.链接);\n                  return `<a href=\"${href}\">${title}</a>`;\n              }\n          });\n          return 定位;\n        });\n       categories.push(一级.join('\\n'));\n            });       \n    }\r\n} else {     \r\n    categories = pdfa(html,  大类定位);\r\n}\r\nlet init_cate = new Array(20).fill(\"0\");\r\nconst fold = getMyVar(MY_RULE.group, \"0\");\r\nconst cate_temp = JSON.parse(getMyVar(\"head.cate\", JSON.stringify(init_cate)));\nvar 折叠状态=(typeof(开启折叠) != 'undefined')?开启折叠:true;\r\nvar 折叠=(typeof(折叠标记) != 'undefined' && 折叠标记 != '')?折叠标记:'““””' + '∨'.fontcolor(\"#FF0000\");\nvar 展开=(typeof(展开标记) != 'undefined' && 展开标记 != '')?展开标记:'““””' + '∧'.fontcolor(\"#1aad19\");\nvar 清除=(typeof(清除键) != 'undefined' && 清除键 != '')?清除键:[];\nvar 状态=(typeof(状态标记) != 'undefined' && 状态标记 != '')?状态标记:MY_RULE.url;\nvar 大类处理=typeof(一级分类处理)=='function'?true:false;\nvar 搜索=typeof(开启搜索)!='undefined'?开启搜索:false;\nvar 全清=(typeof(全清键) != 'undefined' && 全清键 != '')?全清键:[];\n全清.unshift('yi_firstpage');\n\r\nif (parseInt(page) === 1) {\n    if(搜索){\n        d.push({\n        title: \"\",\n        url: \"'hiker://search?rule=\" + MY_RULE.title + \"&s='+input\",\n        desc: \"搜索关键词\",\n        col_type: \"input\",\n        extra: {\n            defaultValue: getMyVar('keyword', ''),\n            onChange: $.toString(() => {\n                putMyVar('keyword', input);\n            })\n        }\n      })\n    }\n    if(折叠状态){\r\n     d.push({\r\n        title: fold === '1' ?  折叠 : 展开,\r\n        url: $().lazyRule((fold,u,all) => {\r\n            putMyVar(MY_RULE.group, fold === '1' ? '0' : '1');\n            all.forEach((item)=>{\n               clearMyVar(item)\n            })\r\n            refreshPage(false);\r\n            return \"hiker://empty\";\r\n        }, fold,状态 ,全清),\r\n        col_type: 'scroll_button',\n        extra:{\n            longClick:[{\n                title:'清除状态',\n                js:$.toString((x,all,cl)=>{\n                     clearMyVar(x);\n                     clearMyVar('head.cate');                     \n                     all.forEach((item)=>{\n                            clearMyVar(item)\n                     })\n                     cl.forEach((item)=>{\n                            clearMyVar(item)\n                     })\n                     refreshPage();\n                },状态,全清,清除)\n            }]\n        }\r\n     })\n    }\r\n    let setTitle=(k,i,t)=>{             \n      return k==i?\"““””\" +t.fontcolor(分类颜色):t\r\n    }\r\n    categories.forEach((category, index) => {\n        let sub_categories=[];\n        if(小类定位.includes(';')){\n            sub_categories = pdfa(category, 小类定位.split(';')[0]);\n            if(sub_categories.length==0){\n            sub_categories = pdfa(category, 小类定位.split(';')[1]);\n            }\n        }else{\r\n        sub_categories = pdfa(category, 小类定位);\n        }\r\n        if (index === 0) {\r\n            sub_categories.forEach((item, key) => {\n                let _大类链接=(typeof(大类链接) != 'undefined' && 大类链接 != '')?大类链接:分类链接;\n                         \r\n                let _大类标题=(typeof(大类标题) != 'undefined' && 大类标题 != '')?大类标题:分类标题;              \n               \r\n                let title = pdfh(item, _大类标题);\r\n                if (typeof(排除) != 'undefined' && 排除 != '') {\r\n                    title = title.replace(new RegExp(排除, \"g\"), \"\");\r\n                }\n                let params={\r\n                        cate_temp: cate_temp,key: key,page: page,clears:清除,state:状态,allclears:全清\r\n                }                \n                \n                let url=pd(item, _大类链接);\n                if(大类处理){\n                    url=一级分类处理(url)\n                }\n                //log(url)\n                d.push({  \r\n                    title: setTitle(key.toString(),cate_temp[index],title),\n                    col_type: 'scroll_button',\r\n                    url: $(url + '#noLoading#').lazyRule((params) => {    \r\n                        let new_cate = [];\n                        params.clears.forEach((item)=>{                            \n                            clearMyVar(item)\n                        })\n                        params.allclears.forEach((item)=>{\n                            clearMyVar(item)\n                        })\n                        \r\n                        params.cate_temp.forEach((cate, index) => {\r\n                            new_cate.push(index === 0 ? params.key.toString() : \"0\")\r\n                        })\r\n                        putMyVar(\"head.cate\", JSON.stringify(new_cate));\r\n                        putMyVar(params.state, input);\r\n                        refreshPage(true);\r\n                        return \"hiker://empty\";\r\n                    },params)\r\n                });\r\n            });\r\n            d.push({\r\n                col_type: \"blank_block\",\r\n            })\r\n        } else if (fold === '1'||折叠状态==false) {\r\n            sub_categories.forEach((item, key) => {\n                var extrapos=false;\n                if(item.includes('type=\"@extra\"')){\n                    extrapos=true;\n                    //log('附加定位')\n                }   \n                \n                if(extrapos){\n                   var title = pdfh(item, 'a&&Text');\r\n                if (typeof(排除) != 'undefined' && 排除 != '') {\r\n                    title = title.replace(new RegExp(排除, \"g\"), \"\");\r\n                  }\n                var json={\n                    type:pdfh(item,'a&&state'),\n                    value:pdfh(item,'a&&value'),\n                  }\n                }else{\n    \r\n                    var title = pdfh(item, 分类标题);\r\n                if (typeof(排除) != 'undefined' && 排除 != '') {\r\n                    title = title.replace(new RegExp(排除, \"g\"), \"\");\r\n                }\n                \n                var json='';\n                switch (true){\n                    case 分类链接.includes('@@@'):\n                    json={\n                    type:pdfh(item,分类链接.split('@@@')[0]),\n                    value:pdfh(item,分类链接.split('@@@')[1]),\n                    }\n                    break;\n                    case 分类链接.includes('@@'):\n                    json={\n                    type:分类链接.split('@@')[0],\n                    value:pdfh(item,分类链接.split('@@')[1]),\n                    }\n                    break;\n                    default:\n                    json=pd(item,分类链接);\n                    break;\n                }\n               /*var json=分类链接.includes('@@@')?{\n                    type:pdfh(item,分类链接.split('@@@')[0]),\n                    value:pdfh(item,分类链接.split('@@@')[1]),\n                }:pd(item,分类链接);\n                \n                json=分类链接.includes('@@')?{\n                    type:分类链接.split('@@')[0],\n                    value:pdfh(item,分类链接.split('@@')[1]),\n                }:pd(item,分类链接);*/\n               \n                }\n                \n                let params= {\r\n                    cate_temp: cate_temp,index: index,key: key, page: page,json:json,state:状态,allclears:全清\r\n                }\r\n                d.push({\r\n                    title: setTitle(key.toString(),cate_temp[index],title),\r\n                    url: $('hiker://empty' + '#noLoading#').lazyRule((params) => {\n                        params.allclears.forEach((item)=>{\n                            clearMyVar(item)\n                        })\r\n                        params.cate_temp[params.index] = params.key.toString();\r\n                        putMyVar(\"head.cate\", JSON.stringify(params.cate_temp));\n                        if(params.json.constructor === Object){\n                            putMyVar('dt_'+params.json.type,params.json.value);\n                        }else{\n                            putMyVar(params.state, params.json);\n                        }   \r\n                        refreshPage(true);\r\n                        return \"hiker://empty\";\r\n                    },params),\r\n                    col_type: 'scroll_button',\r\n                });\r\n            });\r\n            d.push({\r\n                col_type: \"blank_block\",\r\n            });\r\n        }\r\n    })\r\n}\n\n\n\n"}],"title":"咕咕番🌪️","author":"蓝莓果酱UX&153&狗浩啊&zetalpha&R","version":20231114,"type":"video","url":"hiker://empty##https://www.gugufan.com/","col_type":"movie_3","class_name":"","class_url":"","area_name":"","area_url":"","sort_name":"","year_name":"","sort_url":"","year_url":"","find_rule":"js:\nvar d = [];\n\nMY_URL = MY_URL.replace('hiker://empty##', '');\nvar html = fetch(MY_URL);\n/*\nconst host = 'https://www.gugufan.com/';\nvar html = fetch(host, {\n    headers: {\n        'User-Agent': MOBILE_UA\n    }\n});*/\n\n//标题,描述,图片,链接\nvar 标题 = 'a&&title';\nvar 描述 = '.public-prt&&Text';\nvar 图片 = 'img||.lazy&&data-src||data-original';\nvar 链接 = 'a&&href';\n\n//轮播\nvar 轮播列表 = 'body&&.slide-time-bj';\nvar 轮播标题 = '.slide-info-title&&Text';\nvar 轮播图片 =  '.mask-1&&style';\nvar 轮播链接 = 'a&&href';\n\neval(JSON.parse(fetch(\"hiker://page/yi\", {})).rule);\neval(JSON.parse(fetch(\"hiker://page/week\", {})).rule);\n\nvar 推荐列表1 = 'body&&.public-r,9&&.public-list-box,0:12';\nvar 推荐列表2 = 'body&&.public-r,10&&.public-list-box,0:12';\nvar 推荐列表3 = 'body&&.public-r,12&&.public-list-box,0:12';\n\neval(JSON.parse(fetch(\"hiker://page/tj\", {})).rule);\n\nsetResult(d);","searchFind":"js:\nvar d = [];\nMY_URL=MY_URL.split('##')[1];\nlet dhtml = fetch(MY_URL, {\n    headers: {\n        'User-Agent': MOBILE_UA,\n        'referer': MY_URL\n    }\n});\n//log(dhtml)\n\nconst dlist = pdfa(dhtml, 'body&&.search-box');\ndlist.forEach(item => {  \nvar urll =pd(item, 'a&&href') + '#immersiveTheme#';\n    d.push({\n        title: pdfh(item, '.thumb-txt&&Text'),\n          desc: pdfh(item, '.public-list-prb&&Text'),\n        img: pdfh(item, 'img||.lazy&&data-src||data-original') + \"@Referer=\",\n        content:pdfh(item, '.thumb-blurb&&Text'),\n        url: 'hiker://page/ej#noHistory##immersiveTheme#',\n        extra: {url: urll},\n        col_type: 'movie_3',\n    })\n})\nsetResult(d);","search_url":"hiker://empty##https://www.gugufan.com/index.php/vod/search/page/fypage/wd/**.html","group":"#️⃣②动漫","detail_col_type":"movie_1","detail_find_rule":"","sdetail_col_type":"movie_1","sdetail_find_rule":"*","ua":"mobile","preRule":"//发布地址      https://gxdm.me/","pages":"[{\"col_type\":\"movie_3\",\"name\":\"⓸通用解析\",\"path\":\"lazy\",\"rule\":\"var lazy = $('').lazyRule(() => {\\nif (input.indexOf('magnet:?xt') == -1) {\\n    try{\\n      var html = JSON.parse(request(input).match(/r player_.*?=(.*?)</)[1])\\n    var url = html.url\\n    if (html.encrypt == '1') {\\n        url = unescape(url);\\n    } else if (html.encrypt == '2') {\\n        url = unescape(base64Decode(url));\\n    }\\n    if (/m3u8|mp4|flv/.test(url)) {\\n       if (/vip|hd/.test(url)) {\\r\\n           evalPrivateJS('TuSJdpnZaqXGRvvOFRR+3S7eZUjeC1CffFbHhoo0e5+aZ7Kav9KZVZsfkwKkUFf4wzkTrio4jARH6ZwTXpRlH3kI43rWCTU4PdYam15pPYiq5cW0H6gUXhJW7tmJtyLKdje1KapBIGvWaXI0WmoHoMEFBV/MAicmPgpyAJZjsc5Emvdh1n72WPPiyhYNCoMnZ9JpP6aEsWQEmQMcAjPxgs6UMvsO/POw5Ccr79sJzicst/Ll3IOj5M+PvqKrTd6147VGPEztjsUeEudASzTcn+95C9Vg1uwUvd9z0w5qsPboQh5oZhTys4RQEzBGIqulQMAAQY4IFkanWX95EINZDX50mAiOSGyId06HsprAel/fh7wyMXdmeu+S15XncO7UuujMOmGgSAEN/Ssc2ezkxlGvpdyhbl4p4DaQug/nrgswhZj75/M53sKYX2zRgOST7CMjV/+pPJd1KP934uu/VsBQUG69mWN+KaFWhKnwBPhV9qdqGz/LSJnFxIvQ8kBx')\\n           return u + \\\"?url=\\\" + base64Encode(url) + \\\"#.m3u8\\\";\\r\\n        }\\r\\n        return url + \\\";{Origin@https://player.gxdm01.org&&User-Agent@Mozilla/5.0&&Referer@https://player.gxdm01.org/}\\\";\\n    } else {\\n        requireCache('https://agit.ai/lzk23559/PublicRule/raw/branch/master/x5rule.js', 24);\\n        return x5rule(input, input);\\n  }\\n}catch(e){\\n//requireCache('https://agit.ai/lzk23559/PublicRule/raw/branch/master/x5rule.js', 24);\\n        //return x5rule(input, input);\\n        return 'video://' + input;\\n}   \\n } else {\\n        return input\\n    }\\n})\"},{\"col_type\":\"movie_3\",\"name\":\"⓶二级页面\",\"path\":\"ej\",\"rule\":\"js:\\nvar d = []\\nMY_URL=MY_URL.replace('hiker://empty##','');\\nvar html = fetch(MY_URL);\\n\\neval(JSON.parse(fetch('hiker://page/er', {})).rule);\\neval(JSON.parse(fetch('hiker://page/lazy', {})).rule);\\nvar playlist = [{\\n    /*自定义:{\\n        图标: 'https://hikerfans.com/tubiao/q/3.png',\\n        正序颜色: '#32CD32',\\n        逆序颜色: '#FA8072',\\n        线路选中: '#87CEEB',       \\n    },*/\\n    类型: '在线观看',\\n    线路: 'body&&.anthology-tab&&a',\\n    选集: 'body&&.anthology-list-play:not(:matches(α))',\\n    线路名称: 'a--.fa&&Text@@.replace(\\\"α\\\",\\\"\\\")',\\n    选集列表: 'body&&a:not(:matches(α))',\\n    排除: '',\\n    //选集名称: 'Text',\\n    //选集链接: 'a&&href',\\n    //倒序:true,\\n    解析: lazy,\\n    推送: true,\\n}, {\\n    类型: '磁力下载',\\n    //线路: '',\\n    选集: 'body&&.sort-itemm',\\n    //线路名称: 'Text@@.replace(\\\"β\\\",\\\"\\\")',\\n    //选集列表: 'ul&&li',\\n    选集名称: 'Text',\\n    选集链接: 'a&&href',\\n    样式: 'avatar',\\n    图标: 'https://img.vinua.cn/images/Ooz4R.jpeg'\\n}]\\n\\nvar obj = {\\n    main: pdfa(html, '.gen-search-form&&li:not(:matches(状态))'),\\n    sort: ['片名', '导演', '类型','上映', '更新', '主演', '演员'],\\n    //img: MY_PARAMS.img,\\nimg: pd(html, '.lazy&&data-src'),//封面图片\\n}\\n\\nErji.setContent(obj);\\nErji.setDesc(pdfh(html, '.cor3&&Text').replace('收起','').replace(/\\\\s/g,''));//剧情简介\\neval(JSON.parse(fetch('hiker://page/tool', {})).rule);//外部快捷搜索\\nErji.getPlayers(playlist);\\nErji.声明();\\n\\n\\n\\nsetResult(d)\"},{\"col_type\":\"movie_3\",\"name\":\"⑤搜索页面\",\"path\":\"ss\",\"rule\":\"js:\\nvar d = [];\\n\\nconst base_url = 'http://resou.today/art/29.html';\\n\\nlet true_url = getMyVar(MY_RULE.url, base_url);\\nMY_URL=true_url;\\nvar html = fetch(base_url, {\\n    headers: {\\n        'User-Agent': MOBILE_UA\\n    }\\n});\\n\\nvar Icon_prefix = 'https://raw.fastgit.org/ls125781003/lmtubiao/main/more/';\\n\\nd.push({\\n            title: '返回',\\n            url: $().lazyRule(() => {\\n                refreshPage();     \\n                back(false)\\n                    return \\\"toast://返回规则首页\\\"  \\n            }),\\n            pic_url: Icon_prefix + '47.png'+ \\\"@Referer=\\\",\\n            col_type: \\\"icon_small_3\\\",\\n                    \\n        });\\n\\n\\nd.push({\\n            title: '筛选',\\n            url: 'hiker://page/shai?page=fypage#noHistory#',\\n            pic_url: Icon_prefix + '213.png' + \\\"@Referer=\\\",\\n            col_type: \\\"icon_small_3\\\"\\n        });\\n\\nd.push({\\n            title: '历史',\\n            url: 'hiker://history',\\n            pic_url: Icon_prefix + '192.png' + \\\"@Referer=\\\",\\n            col_type: \\\"icon_small_3\\\"\\n        });\\n\\nd.push({\\n    title: \\\"🔍\\\",\\n    //url: \\\"'hiker://search?s='+input+'&rule=宫下动漫♔'\\\",\\n     url: \\\"'hiker://search?rule=\\\" + MY_RULE.title + \\\"&s='+input\\\",\\n    col_type: \\\"input\\\",\\n    desc: \\\"搜索你想要的影视、动漫、综艺等...\\\",\\n});\\n    d.push({\\n        title: '<span style=\\\"color:#ff6600\\\"><b>\\\\t热搜榜\\\\t\\\\t\\\\t</b></span>',\\n        url: \\\"hiker://empty\\\",\\n        pic_url: 'https://ss1.baidu.com/6ONXsjip0QIZ8tyhnq/it/u=3779990328,1416553241&fm=179&app=35&f=PNG?w=60&h=70&s=E7951B62A4639D153293A4E90300401B',\\n        col_type: 'icon_small_3'\\n    });\\n\\n\\nconst list = pdfa(html, 'body&&.art-resou&&li,2:');\\nlist.forEach(item => {  \\n    d.push({\\n        title: pdfh(item, 'span:eq(0)&&Text') + pdfh(item, 'span:eq(1)&&Text'),\\n        desc: pdfh(item, 'span:eq(2)&&Text'),\\n        img: 'https://cdn-icons-png.flaticon.com/128/473/473406.png' + \\\"@Referer=https://img9.doubanio.com/\\\",\\n        //url: 'hiker://search?s='+pdfh(item, 'span:eq(1)&&Text')+'&rule=宫下动漫♔',\\n          url: 'hiker://search?rule=' + MY_RULE.title + '&s='+pdfh(item, 'span:eq(1)&&Text'),\\n        col_type: 'avatar',\\n    })\\n})\\n\\nsetResult(d);\"},{\"col_type\":\"movie_3\",\"name\":\"②一级轮播\",\"path\":\"lunbo\",\"rule\":\"js:\\nfunction banner(title, start, arr, data, cfg) {\\n    let id = title + 'lunbo';\\n    var rnum = Math.floor(Math.random() * data.length);\\n    var item = data[rnum];\\n    putMyVar('rnum', rnum);\\n    let time = 5000;\\n    let col_type = 'pic_1_card';\\n    let color = \\\"white\\\";\\n    let desc = '';\\n    if (cfg != undefined) {\\n        time = cfg.time ? cfg.time : time;\\n        col_type = cfg.col_type ? cfg.col_type : col_type;\\n        desc = cfg.desc ? cfg.desc : desc;\\n    }\\n\\n    arr.push({\\n        col_type: col_type,\\n        img: item.img,\\n        desc: desc,\\n        title: item.title,\\n        url: item.url,\\n        extra: {\\n            id: id+'bar',\\n        }\\n    })\\n\\n    if (start == false || getMyVar('benstart', 'true') == 'false') {\\n        unRegisterTask(id)\\n        return\\n    }\\n    \\n    //log(data)\\n\\n    let obj = {\\n        data: data,\\n    };\\n\\n    registerTask(id, time, $.toString((obj,id) => {\\n        var data = obj.data;\\n        var rum = getMyVar('rnum');\\n\\n        var i = Number(getMyVar('banneri', '0'));\\n        if (rum != '') {\\n            i = Number(rum) + 1\\n            clearMyVar('rnum')\\n        } else {\\n            i = i + 1;\\n        }\\n        //log(i)\\n        //log(data.length)\\n\\n        if (i > data.length - 1) {\\n            i = 0\\n        }\\n        var item = data[i];\\n        //log(item)\\n        try {\\n            updateItem(id+'bar', {\\n                title: item.title,\\n                img: item.img,\\n                url: item.url,\\n                extra: {\\n                    //name: item.title.replace(/<[^>]+>/g, ''),\\n                    //sname: item.extra.sname,\\n                    //stype: item.extra.stype,\\n                    //surl: item.url,\\n                    //img:item.img,\\n                    //pageTitle: item.title.replace(/<[^>]+>/g, ''),\\n                }\\n            })\\n        } catch (e) {\\n            log(e.message)\\n            unRegisterTask(id)\\n        }\\n        putMyVar('banneri', i);\\n\\n    }, obj,id))\\n}\"},{\"col_type\":\"movie_3\",\"name\":\"①一级页面\",\"path\":\"yi\",\"rule\":\"function getBackImage(imgurl){\\n    return /url(?:\\\\s+)?\\\\((.*?)\\\\)/g.exec(imgurl)[1].replace(/'|\\\"/gm,'');\\n};\\nvar Icon_prefix = 'https://hikerfans.com/tubiao/circle/';\\n\\n//刷新       \\n       d.push({\\n            title: '刷新',\\n            url: $().lazyRule(() => {\\n                refreshPage();\\n                return 'toast://刷新成功'  \\n            }),\\n            pic_url: Icon_prefix + '173.png'+ \\\"@Referer=\\\",\\n            col_type: \\\"icon_5\\\"\\n        });\\n\\n//分类\\n        d.push({\\n            title: '分类',\\n            url: 'hiker://page/shai?page=fypage#noHistory#',\\n            pic_url: Icon_prefix + '158.png' + \\\"@Referer=\\\",\\n            col_type: \\\"icon_5\\\"\\n        });\\n\\n//搜索\\n       d.push({\\n            title: '搜索',\\n            url: 'hiker://page/ss',\\n            pic_url: Icon_prefix + '446.png' + \\\"@Referer=\\\",\\n            col_type: \\\"icon_5\\\"\\n        });\\n\\n//更新\\n  d.push({\\n            title: '更新',\\n            url: 'hiker://page/gx',\\n            pic_url: Icon_prefix + '399.png' + \\\"@Referer=\\\",\\n            col_type: \\\"icon_5\\\"\\n        });\\n\\n//周表\\nconst fold = getMyVar('lie.group', \\\"1\\\")\\nd.push({\\n            title: '周表',\\n            url: $('#noLoading#').lazyRule((fold) => {\\n                putMyVar('lie.group', fold === '1' ? '0' : '1');\\n\\n                refreshPage(false);\\n               return \\\"hiker://empty\\\"\\n            }, fold),\\n            col_type: 'icon_5',\\n            pic_url: Icon_prefix + '41.png' + \\\"@Referer=\\\",\\n        });\\n/*\\nd.push({\\n            col_type: \\\"line\\\"\\n        });*/\\nd.push({\\n            col_type: \\\"big_blank_block\\\"\\n        });\\n\\n//轮播\\nvar lundata = pdfa(html, 轮播列表).map((x) => {\\n    //log(x)\\n        var urll = pd(x, 轮播链接) + '#immersiveTheme#';\\n    return {\\n        title: pdfh(x, 轮播标题),\\n        img: getBackImage(pdfh(x,轮播图片) + '@Referer='),\\n        url: 'hiker://page/ej?url='+urll+'#noHistory#',\\n    }\\n});\\neval(JSON.parse(fetch(\\\"hiker://page/lunbo\\\", {})).rule);\\nbanner(MY_RULE.title, true, d, lundata, {\\n        time: 5000,\\n        col_type: 'card_pic_1',\\n        desc: '0'\\n    })\\n\\n\"},{\"col_type\":\"movie_3\",\"name\":\"③一级周表\",\"path\":\"week\",\"rule\":\"//周表\\nif (fold === 0) {\\nd.push({ \\n                col_type: \\\"blank_block\\\"\\n            });\\n        } else if (fold === '1') {\\nvar weeks = new Array(\\\"周一\\\", \\\"周二\\\", \\\"周三\\\", \\\"周四\\\", \\\"周五\\\", \\\"周六\\\",\\\"周日\\\");\\n\\nfunction getWeekDate() {\\n    var now = new Date();\\n    var day = now.getDay();\\n    var week = weeks[day];\\n    //log(week)\\n    return week;\\n}\\nlet now_Week = getWeekDate();\\n//log(now_Week);\\n    weeks.forEach(it => {\\n        d.push({\\n            title: getMyVar('week', now_Week) === it ? '☀' + '““””<b><font color=#FA7298>' + it + '</font></b>' : it.replace('周',''),\\n            url: $('#noLoading##noHistory#').lazyRule((it) => {\\n                putMyVar(\\\"week\\\", it);\\n                refreshPage();\\n                return \\\"hiker://empty\\\"\\n            }, it),\\n            col_type: \\\"scroll_button\\\"\\n        });\\n    })\\n\\nlet chose_week = getMyVar('week', now_Week);\\nvar wkTonum = function(wk) {\\n        if (/周|星期/.test(wk)) {\\n            wk = wk.replace(/周|星期/, \\\"\\\")\\n        }\\n        var map = {\\n            \\\"日\\\": 7,\\n            \\\"一\\\": 1,\\n            \\\"二\\\": 2,\\n            \\\"三\\\": 3,\\n            \\\"四\\\": 4,\\n            \\\"五\\\": 5,\\n            \\\"六\\\": 6\\n        };\\n        return map[wk]\\n    }\\n    let wk_num = wkTonum(chose_week);\\n//log(wk_num)\\nfor (var k = 1; k <= 7; k++) {\\n    eval('var wk' + k + '=pdfa(html, \\\"#week-module-' + (k==0?0:k) + '&&.public-list-box,0:12\\\");');//星期列表\\n    if (wk_num == k) {\\n        eval('wk'+k).forEach(item => {\\n            var urll = MY_HOME + pdfh(item, 'a&&href') + '#immersiveTheme#';\\n            d.push({\\n                title: pdfh(item, 标题),\\n                desc: pdfh(item, 描述),\\n                img: pd(item, 图片) + \\\"@Referer=\\\",\\n                url: 'hiker://page/ej#noHistory##immersiveTheme#',\\n                extra: {\\n                    url: urll,\\n                    title: pdfh(item, 标题),\\n                    img: pd(item, 图片) + \\\"@Referer=\\\",\\n                },\\n                col_type: 'movie_3',\\n            });\\n        })\\n    }    \\n}\\nd.push({\\n                col_type: \\\"blank_block\\\"\\n            });\\n        }\\n\"},{\"col_type\":\"movie_3\",\"name\":\"④一级推荐\",\"path\":\"tj\",\"rule\":\"const fold1 = getMyVar('rb.group', \\\"1\\\")\\nd.push({\\n    title:fold1 === '1' ? '<b><span style=\\\"color: #f73859\\\">连载新番\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t🍀</span></b>' : '连载新番\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t☘️',\\n    url: $('#noLoading#').lazyRule((fold1) => {\\n                putMyVar('rb.group', fold1 === '1' ? '0' : '1');\\n                refreshPage(false);\\n                return \\\"hiker://empty\\\"\\n            }, fold1),\\n    pic_url: 'https://raw.fastgit.org/ls125781003/lmtubiao/main//ke/120.png',\\n    col_type: \\\"avatar\\\"\\n});\\nif (fold1 === 0) {\\nd.push({ \\n                col_type: \\\"blank_block\\\"\\n            });\\n        } else if (fold1 === '1') {\\nvar jjdm=pdfa(html, 推荐列表1);\\njjdm.forEach(item => {  \\nvar urll = pd(item, 链接) + '#immersiveTheme#';\\n    d.push({\\n        title: pdfh(item, 标题),\\n        desc: pdfh(item, 描述),\\n        img: pdfh(item, 图片) + \\\"@Referer=\\\",\\n        url: 'hiker://page/ej#noHistory##immersiveTheme#',\\n        extra: {\\n             url: urll,\\n             title: pdfh(item, 标题),\\n             img: pd(item, 图片) + \\\"@Referer=\\\",\\n                },\\n        col_type: 'movie_3',\\n    });\\n})\\n}\\n\\nconst fold2 = getMyVar('hj.group', \\\"1\\\")\\nd.push({\\n    title:fold2 === '1' ? '<b><span style=\\\"color: #ff847c\\\">完结番剧\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t🔅</span></b>' : '完结番剧\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t🔅',\\n    url: $('#noLoading#').lazyRule((fold2) => {\\n                putMyVar('hj.group', fold2 === '1' ? '0' : '1');\\n                refreshPage(false);\\n                return \\\"hiker://empty\\\"\\n            }, fold2),\\n    pic_url: 'https://raw.fastgit.org/ls125781003/lmtubiao/main/ke/37.png' + \\\"@Referer=\\\",\\n    col_type: \\\"avatar\\\"\\n});\\nif (fold2 === 0) {\\nd.push({ \\n                col_type: \\\"blank_block\\\",\\n            });\\n        } else if (fold2 === '1') {\\nvar jjdm=pdfa(html, 推荐列表2);\\njjdm.forEach(item => {  \\nvar urll = pd(item, 链接) + '#immersiveTheme#';\\n    d.push({\\n        title: pdfh(item, 标题),\\n        desc: pdfh(item, 描述),\\n        img: pdfh(item, 图片) + \\\"@Referer=\\\",\\n        url: 'hiker://page/ej#noHistory##immersiveTheme#',\\n        extra: {\\n             url: urll,\\n             title: pdfh(item, 标题),\\n             img: pd(item, 图片) + \\\"@Referer=\\\",\\n                },\\n        col_type: 'movie_3',\\n    });\\n})\\n}\\nconst fold3 = getMyVar('hj.group', \\\"1\\\")\\nd.push({\\n    title:fold3 === '1' ? '<b><span style=\\\"color: #ff847c\\\">动漫剧场\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t💓</span></b>' : '动漫剧场\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t💗',\\n    url: $('#noLoading#').lazyRule((fold3) => {\\n                putMyVar('hj.group', fold3 === '1' ? '0' : '1');\\n                refreshPage(false);\\n                return \\\"hiker://empty\\\"\\n            }, fold3),\\n    pic_url: 'https://raw.fastgit.org/ls125781003/lmtubiao/main/ke/40.png' + \\\"@Referer=\\\",\\n    col_type: \\\"avatar\\\"\\n});\\nif (fold3 === 0) {\\nd.push({ \\n                col_type: \\\"blank_block\\\",\\n            });\\n        } else if (fold3 === '1') {\\nvar jjdm=pdfa(html, 推荐列表3);\\njjdm.forEach(item => {  \\nvar urll = pd(item, 链接) + '#immersiveTheme#';\\n    d.push({\\n        title: pdfh(item, 标题),\\n        desc: pdfh(item, 描述),\\n        img: pdfh(item, 图片) + \\\"@Referer=\\\",\\n        url: 'hiker://page/ej#noHistory##immersiveTheme#',\\n        extra: {\\n             url: urll,\\n             title: pdfh(item, 标题),\\n             img: pd(item, 图片) + \\\"@Referer=\\\",\\n                },\\n        col_type: 'movie_3',\\n    });\\n})\\n}\"},{\"col_type\":\"movie_3\",\"name\":\"⑥更新页面\",\"path\":\"gx\",\"rule\":\"js:\\nvar d = [];\\nconst base_url = 'https://www.gugufan.com/index.php/map/index.html';\\n\\nlet true_url = getMyVar(MY_RULE.url, base_url);\\nMY_URL=true_url;\\nvar html=fetch(true_url)\\nlog(html)\\n\\nd.push({\\n    title:'<b><span style=\\\"color: #FA7298\\\">最近更新\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\t\\\\🌸🌸🌸🌸🌸</span></b>',\\n    url: \\\"hiker://empty\\\",\\n    pic_url: 'https://raw.fastgit.org/ls125781003/lmtubiao/main/ke/63.png' + \\\"@Referer=\\\",\\n    col_type: \\\"avatar\\\"\\n});\\n\\nconst list = pdfa(html, 'body&&.public-list-box');\\nlist.forEach(item => {  \\nvar urll =pd(item, 'a&&href') + '#immersiveTheme#';\\n    d.push({\\n        title: pdfh(item, 'a&&title'),\\n        desc: pdfh(item, '.public-list-prb&&Text'),\\n        img: pdfh(item, 'img||.lazy&&data-src||data-original').split('=')[1]||pdfh(item, 'img||.lazy&&data-src||data-original') + \\\"@Referer=https://img9.doubanio.com/\\\",\\n        url: 'hiker://page/ej#noHistory##immersiveTheme#',\\n        extra: {url: urll},\\n        col_type: 'movie_3_marquee',\\n    })\\n})\\n\\nsetResult(d);\"},{\"col_type\":\"movie_3\",\"name\":\"⓵二级内容\",\"path\":\"er\",\"rule\":\"js:\\n/*ver 20230818 1.0\\n */\\nvar custom = {};\\n\\n//预设\\nfunction customData(custom) {\\n    Object.keys(custom).forEach((k) => {\\n        this[k] = custom[k];\\n    })\\n}\\n\\nlet Erji = {\\n    通免: $('').lazyRule(() => {\\n        try {\\n            var html = JSON.parse(request(input).match(/r player_.*?=(.*?)</)[1])\\n            var url = html.url\\n            if (html.encrypt == '1') {\\n                url = unescape(url);\\n            } else if (html.encrypt == '2') {\\n                url = unescape(base64Decode(url));\\n            }\\n            if (/m3u8|mp4/.test(url)) {\\n                return url\\n            } else {\\n                return \\\"video://\\\" + input\\n            }\\n        } catch (e) {\\n            return \\\"video://\\\" + input\\n        }\\n    }),\\n    updata: function(rule, headers) {\\n        headers = headers != undefined ? headers : {};\\n        setLastChapterRule('js:' + $.toString((url, rule, headers) => {\\n            var html = fetch(url, headers);\\n            setResult(eval(rule))\\n        }, MY_URL, rule, headers))\\n    },\\n    close: function(list, sorts) {\\n        addListener('onClose', $.toString((list, sorts) => {\\n            list.map(x => {\\n                clearMyVar('er_' + x + 'fold');\\n                clearMyVar('er_' + x);\\n            })\\n            for (let i = 0; i < sorts; i++) {\\n                clearMyVar('playlist_' + i);\\n            }\\n            clearMyVar('er_playlists');\\n        }, list, sorts))\\n    },\\n    dataConvert: function(data) {\\n        var newclslist = data.map(function(obj) {\\n            var newObj = Object.assign({}, obj);\\n            if (newObj.hasOwnProperty('type')) {\\n                newObj.col_type = newObj.type;\\n            }\\n            return newObj;\\n        });\\n        return newclslist;\\n    },\\n    preLoad: function(func) {\\n        let myfunc = null\\n        if (func != undefined && func.constructor == Function) {\\n            myfunc = func\\n        }\\n        $.extend({\\n            dataConvert: this.dataConvert,\\n            msm: Methods.MultiSelectMode,\\n            func: myfunc,\\n        })\\n    },\\n    small: function(str, color) {\\n        return '‘‘’’<small><font color=\\\"' + (color || '') + '\\\">' + str + '</font></small>';\\n    },\\n    声明: function() {\\n        d.push({\\n            title: this.small('以上数据来源于网络，如您喜欢，请支持官方！', '#871F78'),\\n            desc: this.small('此规则仅限学习交流使用，请于导入后24小时内删除，任何组织或个人不得以任何方式方法传播此规则的整体或部分！', '#F20C00'),\\n            url: 'hiker://empty',\\n            col_type: 'text_center_1'\\n        });\\n    },\\n\\n\\n//简介\\n    setDesc: function(desc, num) {\\n        desc = desc.constructor == Array ? desc.join('<br>') : desc;\\n        if (desc.replace(/(<br>|\\\\s+)/g, '').length == 0) {\\n            return\\n        }\\n        var info = storage0.getMyVar('er_info', '{}')\\n        if (info['desc'] != undefined) {\\n            info['desc'] = info['desc'] + ' 简介:' + desc;\\n            storage0.putMyVar('er_info', info);\\n        }\\n\\n        const mark = 'desc';\\n        num = typeof(num) == 'undefined' ? 90 : num\\n        desc = desc.startsWith('　　') ? desc : '　　' + desc;\\n        desc = desc.replace(/'/g, \\\"&#39;\\\");\\n        desc = desc.replace(/\\\\r\\\\n/g, \\\"<br>\\\");\\n\\n        function substr(str, maxLength) {\\n            let len = 0;\\n            for (let i = 0; i < str.length; i++) {\\n                if (str.charCodeAt(i) > 255) {\\n                    len += 2;\\n                } else {\\n                    len++;\\n                }\\n                if (len > maxLength) {\\n                    return str.slice(0, i) + '...';\\n                }\\n            }\\n            return str;\\n        }\\n        let sdesc = substr(desc, num);\\n        var lazy = $(`#noLoading#`).lazyRule((dc, sdc, m) => {\\n            var show = storage0.getItem(m, '0');\\n            var title = findItem('desc').title;\\n            var re = /(<\\\\/small><br>.*?>).+/g;\\n            var exp = '展开:';\\n            var ret = '收起:';\\n            if (show == '1') {\\n                updateItem('desc', {\\n                    title: title\\n                        .replace(ret, exp)\\n                        .replace(re, '$1' + sdc + '</small>')\\n                        .replace(/(<\\\\/small><br><font color=\\\").*?(\\\">)/, '$1#8A2BE2$2')//收起颜色\\n\\n                })\\n                storage0.setItem(m, '0');\\n            } else {\\n                updateItem('desc', {\\n                    title: title\\n                        .replace(exp, ret)\\n                        .replace(re, '$1' + dc + '</small>')\\n                        .replace(/(<\\\\/small><br><font color=\\\").*?(\\\">)/, '$1#008000$2')//展开颜色\\n                })\\n                storage0.setItem(m, '1');\\n            }\\n            return `hiker://empty`\\n        }, desc, sdesc, mark)\\n        var sc = storage0.getItem(mark, '0') == '0' ? '展开:' : '收起:';\\n        var dc = storage0.getItem(mark, '0') == '0' ? sdesc : desc;\\n        d.push({\\n            title: '' + '<b><font color=\\\"#098AC1\\\">∷                      剧情简介\\t</font></b>' + \\\"<small><a style='text-decoration: none;' href='\\\" + lazy + \\\"'>\\\" + sc + '</a></small><br><font color=\\\"#8A2BE2\\\">' + `${dc}` + '</small>',//默认颜色\\n            col_type: 'rich_text',\\n            extra: {\\n                id: 'desc',\\n                lineSpacing: 6,\\n                textSize: 15,\\n                lineVisible: true,\\n            }\\n        })\\n    },\\n\\n\\n//海报\\n    strConvert: function(arr) {\\n        return arr.map(x => {\\n            str = x;\\n            if (/(导演|主演|类型)：/.test(str)) {\\n                str = str.split('/').map((val, index) => (index === 0 ? '' : '') + val).slice(0, 5).join(' ').replace(/ $/, '');\\n            }\\n            return str\\n        })\\n    },\\n    setContent: function(obj) {\\n        //log(obj)\\n        var contents = obj.main;\\n        var sortOrder = obj.sort;\\n        var img = obj.img;\\n        var texts = contents.map(x => pdfh(x, 'Text'));\\n\\n        var array = texts.sort((a, b) => {\\n            const indexA = sortOrder.indexOf(a.substr(0, 2));\\n            const indexB = sortOrder.indexOf(b.substr(0, 2));\\n            return indexA - indexB;\\n        })\\n        var regex = new RegExp('(' + sortOrder.join('|') + ')');\\n        array = array.filter(function(item) {\\n            return regex.test(item);\\n        });\\n        //log(array)\\n\\n        //array = sortOrder.length==0?array:this.strConvert(array);\\n        array = this.strConvert(array);\\n\\n        if (array.length > 6) {\\n            array = array.slice(0, 6);\\n        }\\n\\n        var titles = [];\\n        var descs = [];\\n\\n        switch (array.length) {\\n            case 4:\\n            case 5:\\n                titles = array.slice(0, 2);\\n                descs = array.slice(2);\\n                break;\\n            case 6:\\n                titles = array.slice(0, 3);\\n                descs = array.slice(3);\\n                break;\\n        }\\n        storage0.putMyVar('er_info', {\\n            desc: descs.join('\\\\n'),\\n            img: img,\\n        })\\n        d.push({\\n           title:  this.small( titles[0] + '\\\\n' +titles.slice(1, 3).join('\\\\n'),'red'),\\n            desc: this.small(descs.join('\\\\n'),'#FF7F00'),\\n            //title:  this.small(pdfh(html, '.video-info-items:matches(备注：|连载：|集数：|片长：)&&Text') + '\\\\n' + pdfh(html, '.video-info-aux&&Text'),'red'),\\n          //desc: this.small(pdfh(html, '.video-info-items:contains(更新：)&&Text') + '\\\\n' + pdfh(html, '.video-info-items:contains(导演：)&&Text') + '\\\\n' + pdfh(html, '.video-info-items:contains(主演：)&&Text'),'#FF7F00'),\\n            pic_url: img + '@Referer=',\\n            url: MY_URL,\\n            col_type: 'movie_1_vertical_pic_blur',\\n        })\\n        if (obj.desc != undefined) {\\n            this.setDesc(obj.desc);\\n        }\\n    },\\n    setCustom: function(obj, img) {\\n        var array = [];\\n        if (obj.constructor == Array) {\\n            array = obj;\\n        }\\n        array = this.strConvert(array);\\n        var titles = [];\\n        var descs = [];\\n        switch (array.length) {\\n            case 4:\\n            case 5:\\n                titles = array.slice(0, 2);\\n                descs = array.slice(2);\\n                break;\\n            case 6:\\n                titles = array.slice(0, 3);\\n                descs = array.slice(3);\\n                break;\\n        }\\n        storage0.putMyVar('er_info', {\\n            desc: descs.join('\\\\n'),\\n            img: img,\\n        })\\n        d.push({\\n            title: titles[0] + '\\\\n' + this.small(titles.slice(1, 3).join('\\\\n')),\\n            desc: this.small(descs.join('\\\\n')),\\n            pic_url: img + '@Referer=',\\n            url: MY_URL,\\n            col_type: 'movie_1_vertical_pic_blur',\\n        })\\n    },\\n    isColor: function(text) {\\n        const regex = /^#([0-9A-Fa-f]{3}|[0-9A-Fa-f]{6})$|^([a-z]+)$/i;\\n        return regex.test(text);\\n    },\\n    getPreset: function(custom) {\\n        if (typeof customdata == 'object' && !custom) {\\n            custom = customdata;\\n        } else {\\n            custom = custom ? custom : {}\\n        }\\n        custom.正序颜色 = (custom.正序颜色 && this.isColor(custom.正序颜色)) ? custom.正序颜色 : '#1AAD19';\\n        custom.逆序颜色 = (custom.逆序颜色 && this.isColor(custom.逆序颜色)) ? custom.逆序颜色 : '#FF0000';\\n        custom.图标 = custom.图标 ? custom.图标 : 'https://i2.100024.xyz/2023/06/10/h4z627.webp';\\n        custom.线路选中 = custom.线路选中 ? custom.线路选中 : '#008B8B';\\n        custom.线路样式 = custom.线路样式 ? custom.线路样式 : 'scroll_button';\\n        custom.分割样式 = custom.分割样式 ? custom.分割样式 : 'blank_block';\\n        return custom;\\n    },\\n    createPList: function(tabs, vari, shsort, custom) {\\n        vari = \\\"er_\\\" + vari;\\n        for (var i = 0; i < tabs.length; i++) {\\n            var url = $('#noLoading#').lazyRule((vari, shsort, i, linec) => {\\n\\n                var lists = storage0.getMyVar(shsort + '_list', '[]');\\n\\n                if (getMyVar(vari + 'fold', '1') == '0') {\\n                    var btn = findItem(shsort + '_button');\\n                    var folds = ['<font color=\\\"#D3D3D3\\\">☷', '<font color=\\\"#FFA500\\\">☰'];\\n                    var plist = storage0.getMyVar('er_playlists', '{}');\\n                    \\n                    var col = plist[shsort].col_type;\\n                    var cls = plist[shsort].cls;\\n                    var pic = plist[shsort].pic;\\n                    var extra = plist[shsort].extra;\\n                    //log(extra)\\n                    updateItem(btn.extra.id, {\\n                        title: btn.title.replace(folds[0], folds[1]),\\n                    })\\n\\n                    putMyVar(vari + 'fold', '1');\\n                    //return 'toast://展开才能操作';\\n                } else {\\n                    var plist = storage0.getMyVar('er_playlists', '{}');\\n                    \\n                    var col = plist[shsort].col_type;\\n                    var cls = plist[shsort].cls;\\n                    var pic = plist[shsort].pic;\\n                    var extra = plist[shsort].extra;\\n                    //log(extra)\\n                }\\n                putMyVar(vari, i);\\n\\n                var xlist = lists[i];\\n                if ($.func != undefined && $.func.constructor == Function) {\\n                    xlist = $.func(i);\\n                    storage0.putMyVar(shsort + '_list', xlist);\\n                }\\n                var plays = xlist.map(x => {\\n                    return {\\n                        title: x.title,\\n                        url: x.url,\\n                        col_type: col,\\n                        pic: pic,\\n                        extra: Object.assign({},extra,{\\n                            id: x.url.replace(/@lazyRule[\\\\s\\\\S]+/g, ''),\\n                            cls: cls,\\n                        })                                                                     \\n                    }\\n                })\\n                if (getMyVar(shsort + '_sort') == '1') {\\n                    plays.reverse();\\n                }\\n                var pcfg = storage0.getMyVar(shsort + '_pushcfg', '{}');\\n                if (pcfg['单推']) {\\n                    updateItem(shsort + '_push', {\\n                        title: pcfg['obj']['单推'][0]\\n                    })\\n                    pcfg['单推'] = false;\\n                }\\n                if (pcfg['选推']) {\\n                    updateItem(shsort + '_pushs', {\\n                        title: pcfg['obj']['选推'][0]\\n                    })\\n                    pcfg['选推'] = false;\\n                }\\n                storage0.putMyVar(shsort + '_pushcfg', pcfg);\\n                deleteItemByCls(shsort);\\n                addItemAfter(shsort + '_line', plays);\\n\\n                var tabx = findItemsByCls(shsort + '_tab');\\n                tabx.forEach((x, ii) => {\\n                    var title = x.title;\\n                    if (i == ii) {\\n                        updateItem(x.extra.id, {\\n                            title: title.replace(/#(\\\\w+)?/g, linec),\\n                        })\\n                    } else {\\n                        updateItem(x.extra.id, {\\n                            title: title.replace(/#(\\\\w+)?/g, '#'),\\n                        })\\n                    }\\n                })\\n                return 'toast://切换成功！';\\n            }, vari, shsort, i, custom.线路选中)\\n            d.push({\\n                title: '““””' + (getMyVar(vari, '0') == i ? tabs[i].fontcolor(custom.线路选中) : tabs[i].fontcolor('#')),\\n                url: url,\\n                col_type: custom.线路样式,\\n                extra: {\\n                    cls: shsort + '_tab',\\n                    id: shsort + '_tab_' + i,\\n                }\\n            })\\n        }\\n        d.push({\\n            col_type: custom.分割样式,\\n            extra: {\\n                id: shsort + '_line',\\n            }\\n        })\\n    },\\n    pushTab: function(vari, shsort) {\\n        addListener('onRefresh', $.toString((shsort) => {\\n            clearMyVar(shsort + '_pushcfg');\\n            clearMyVar(shsort + '_duoselect');\\n        }, shsort))\\n        var pobj = {\\n            '单推': ['⦿单推', '<b>⦿单推</b>'.fontcolor('#00FA9A')],\\n            '选推': ['☑选推', '<b>☑选推</b>'.fontcolor('#4682B4')],\\n        }\\n\\n        d.push({\\n            title: '⌘',\\n            col_type: 'scroll_button',\\n            url: 'hiker://empty',\\n            extra: {\\n                cls: shsort + '_pushtab',\\n            }\\n        }, {\\n            title: pobj['单推'][0],\\n            col_type: 'scroll_button',\\n            url: $('#noLoading#').lazyRule((shsort, pobj, vari) => {\\n                if (getMyVar(vari + 'fold', '1') == '0') {\\n                    return 'toast://展开才能操作';\\n                }\\n\\n                var titles = pobj['单推'];\\n                var pcfg = storage0.getMyVar(shsort + '_pushcfg', '{}');\\n                pcfg['obj'] = pobj;\\n                var 单推 = pcfg['单推'] ? pcfg['单推'] : false;\\n\\n                if (单推) {\\n                    updateItem(shsort + '_push', {\\n                        title: titles[0],\\n                    })\\n                    pcfg['单推'] = false;\\n                    pcfg['playlist'].map((x) => {\\n                        updateItem(x.extra.id, {\\n                            url: x.url,\\n                        })\\n                    })\\n                } else {\\n                    updateItem(shsort + '_push', {\\n                        title: '““””' + titles[1],\\n                    })\\n                    updateItem(shsort + '_pushs', {\\n                        title: pobj['选推'][0],\\n                    })\\n                    pcfg['单推'] = true;\\n                    pcfg['选推'] = false;\\n                    var playlist = findItemsByCls(shsort);\\n                    pcfg['playlist'] = playlist;\\n                    findItemsByCls(shsort).map(x => {\\n                        var dpush = {\\n                            name: getPageTitle(),\\n                            url: x.title + '$' + x.extra.id\\n                        }\\n                        updateItem(x.extra.id, {\\n                            url: $('').lazyRule((dpush) => {\\n                                return 'hiker://page/push?rule=XYQ推送&pushurl=' + encodeURIComponent(JSON.stringify(dpush));\\n                            }, dpush)\\n                        })\\n                    })\\n                }\\n                storage0.putMyVar(shsort + '_pushcfg', pcfg);\\n                return 'toast://' + (单推 ? '单推开启' : '单推关闭');\\n            }, shsort, pobj, vari),\\n            extra: {\\n                id: shsort + '_push',\\n                cls: shsort + '_pushtab',\\n            }\\n        }, {\\n            title: pobj['选推'][0],\\n            col_type: 'scroll_button',\\n            url: $('#noLoading#').lazyRule((shsort, pobj, vari) => {\\n                if (getMyVar(vari + 'fold', '1') == '0') {\\n                    return 'toast://展开才能操作';\\n                }\\n                var titles = pobj['选推'];\\n                var pcfg = storage0.getMyVar(shsort + '_pushcfg', '{}');\\n                pcfg['obj'] = pobj;\\n                var 选推 = pcfg['选推'] ? pcfg['选推'] : false;\\n                if (选推) {\\n                    updateItem(shsort + '_pushs', {\\n                        title: titles[0],\\n                    })\\n                    pcfg['选推'] = false;\\n                    pcfg['playlist'].map((x) => {\\n                        updateItem(x.extra.id, {\\n                            title: x.title,\\n                            url: x.url,\\n                        })\\n                    })\\n                    updateItem(shsort + '_pushto', {\\n                        title: '推送本页=>TVBox',\\n                    });\\n                    clearMyVar(shsort + '_duoselect');\\n                } else {\\n                    updateItem(shsort + '_pushs', {\\n                        title: '““””' + titles[1],\\n                    })\\n                    pcfg['选推'] = true;\\n                    pcfg['单推'] = false;\\n                    var playlist = findItemsByCls(shsort);\\n                    pcfg['playlist'] = playlist;\\n                    let Ids = playlist.map(it => it.extra.id);\\n                    Ids.forEach(x => {\\n                        var title = findItem(x).title;\\n                        updateItem(x, {\\n                            url: $.msm(title, x, shsort),\\n                        });\\n                    });\\n                    updateItem(shsort + '_push', {\\n                        title: pobj['单推'][0],\\n                    })\\n                    updateItem(shsort + '_pushto', {\\n                        title: '推送选中=>TVBox',\\n                    });\\n                }\\n                storage0.putMyVar(shsort + '_pushcfg', pcfg);\\n                return 'toast://' + (选推 ? '选推开启' : '选推关闭');\\n            }, shsort, pobj, vari),\\n            extra: {\\n                id: shsort + '_pushs',\\n                cls: shsort + '_pushtab'\\n            }\\n        }, {\\n            title: \\\"推送本页=>TVBox\\\",\\n            col_type: 'scroll_button',\\n            url: $('#noLoading#').lazyRule((shsort, vari) => {\\n                var pcfg = storage0.getMyVar(shsort + '_pushcfg', '{}');\\n                var 单推 = pcfg['单推'] ? pcfg['单推'] : false;\\n                var 选推 = pcfg['选推'] ? pcfg['选推'] : false;\\n                if (!单推 && !选推) {\\n                    var tabs = storage0.getMyVar(shsort + '_tabs', '[]');\\n                    try {\\n                        var pls = storage0.getMyVar(shsort + '_list', '[]').map(li => {\\n                            return li.map(item => item.title + '$' + item.url.replace(/@lazyRule[\\\\s\\\\S]+/g, '')).join('#')\\n                        }).join('$$$');\\n                    } catch {\\n                        var pls = storage0.getMyVar(shsort + \\\"_list\\\", '[]').map(x => x.title + \\\"$\\\" + x.url).join(\\\"#\\\");\\n                        var tabs = [tabs[getMyVar(vari, '0')]];\\n                    }\\n                    /*log(pls)\\n                    log(tabs)*/\\n                }\\n                if (选推) {\\n                    var pls = storage0.getMyVar(shsort + \\\"_duoselect\\\", '[]').map(x => x.title + \\\"$\\\" + x.url).join(\\\"#\\\");\\n                    if (pls.length == 0) {\\n                        return 'toast://选择为空';\\n                    }\\n                    var tabs = ['播放列表'];\\n                }\\n\\n                var info = storage0.getMyVar('er_info', '{}');\\n                var desc = info['desc'];\\n                var 推送 = {\\n                    \\\"name\\\": getPageTitle(),\\n                    \\\"content\\\": desc || '',\\n                    \\\"pic\\\": info['img'] || '',\\n                    \\\"from\\\": tabs.join('$$$'),\\n                    \\\"url\\\": pls,\\n                }\\n                //log(推送)\\n                return \\\"hiker://page/push?rule=XYQ推送&pushurl=\\\" + encodeURIComponent(JSON.stringify(推送))\\n            }, shsort, vari),\\n            extra: {\\n                id: shsort + '_pushto',\\n                cls: shsort + '_pushtab'\\n            }\\n        }, {\\n            col_type: 'blank_block',\\n            extra: {\\n                cls: shsort + '_pushtab',\\n            }\\n        })\\n    },\\n    setLongclick: function(shsort, custom) {\\n        return [{\\n            title: '样式🎨',\\n            js: $.toString((shsort) => {\\n                let all_cols = [''].concat(getColTypes());\\n                all_cols = all_cols.filter(x =>\\n                    /(text_|flex).*/.test(x) && x != 'text_icon');\\n                //log(all_cols)\\n                let cls = storage0.getMyVar('er_playlists', '{}') ||\\n                    '';\\n                if (cls[shsort] != '') {\\n                    col = cls[shsort].col_type;\\n                }\\n                let 按钮样式 = all_cols.map((it) => {\\n                    return it === col ? '👉' + it : it;\\n                });\\n                let tips = '请选择选集按钮样式';\\n                return $(按钮样式, 2, tips).select((shsort, cls) => {\\n                    input = input.replace(/👉/g, '');\\n                    /*storage0.setItem('按钮样式', input);*/\\n                    let oldIds = (findItemsByCls(shsort) || []).map(it => it.extra.id); //老元素ids\\n                    oldIds.forEach(x => {\\n                        updateItem(x, {\\n                            col_type: input\\n                        });\\n                    });\\n                    return 'toast://已切换选集按钮样式为:' + input;\\n                }, shsort, cls);\\n            }, shsort, custom)\\n        }]\\n    },\\n    setTabs: function(tabs, vari, shsort, parse) {\\n        let custom = parse.自定义;\\n        custom = this.getPreset(custom);\\n        shsort = shsort ? shsort : 'shsort';\\n        var title = (getMyVar(shsort + '_sort', '0') == '1') ? '<b><span style=\\\"color: ' + custom.逆序颜色 + '\\\">逆序</span></b>' : '<b><span style=\\\"color: ' + custom.正序颜色 + '\\\">正序</span></b>'\\n        d.push({\\n            title: vari + ':' + title,\\n            desc: '共' + String(tabs.length).fontcolor('#4682B4') + '条线路',\\n            url: $('#noLoading#').lazyRule((shsort, vari, custom) => {\\n                let conf = getMyVar(shsort + '_sort', '0');\\n                if (getMyVar('er_' + vari + 'fold', '1') == '0') {\\n                    return 'toast://展开才能操作';\\n                }\\n                var clslists = findItemsByCls(shsort);\\n                var newclslist = $.dataConvert(clslists);\\n\\n                var titles = [`${custom.正序颜色}\\\">正序`, `${custom.逆序颜色}\\\">逆序`];\\n\\n                deleteItemByCls(shsort);\\n                newclslist.reverse();\\n                addItemAfter(shsort + '_line', newclslist);\\n\\n                var obj = findItem(shsort + '_avatar')\\n\\n                if (conf == '1') {\\n                    updateItem(shsort + '_avatar', {\\n                        title: obj.title.replace(titles[1], titles[0]),\\n                    })\\n                    putMyVar(shsort + '_sort', '0');\\n                } else {\\n                    updateItem(shsort + '_avatar', {\\n                        title: obj.title.replace(titles[0], titles[1]),\\n                    })\\n                    putMyVar(shsort + '_sort', '1');\\n                }\\n                return 'toast://切换排序成功';\\n            }, shsort, vari, custom),\\n            col_type: 'avatar',\\n            img: custom.图标,\\n            extra: {\\n                id: shsort + '_avatar',\\n                longClick: this.setLongclick(shsort),\\n            }\\n        })\\n        var 折叠 = '““””<b>' + '☷'.fontcolor(\\\"#D3D3D3\\\");\\n        var 展开 = '““””<b>' + '☰'.fontcolor(\\\"#FFA500\\\");\\n        var foldname = 'er_' + vari + 'fold';\\n        var fold = getMyVar(foldname, '1');\\n        if (typeof(parse['推送']) != 'undefined' && parse['推送'])\\n            this.pushTab('er_' + vari, shsort);\\n\\n        d.push({\\n            title: fold === '0' ? 折叠 : 展开,\\n            col_type: custom.线路样式,\\n            url: $('#noLoading#').lazyRule((foldname, shsort) => {\\n                var fold = getMyVar(foldname, '1');\\n                var obj = findItem(shsort + '_line');\\n                var btn = findItem(shsort + '_button');\\n                var folds = ['<font color=\\\"#D3D3D3\\\">☷', '<font color=\\\"#FFA500\\\">☰'];\\n\\n                if (fold == '0') {\\n                    putMyVar(foldname, '1');\\n                    var cs = storage0.getMyVar(shsort + '_cls');\\n                    addItemAfter(obj.extra.id, cs);\\n                    updateItem(btn.extra.id, {\\n                        title: btn.title.replace(folds[0], folds[1]),\\n                    })\\n                }\\n                if (fold == '1') {\\n                    putMyVar(foldname, '0');\\n                    var pcls = findItemsByCls(shsort);\\n                    var cx = $.dataConvert(pcls);\\n                    storage0.putMyVar(shsort + '_cls', cx);\\n                    deleteItemByCls(shsort);\\n                    updateItem(btn.extra.id, {\\n                        title: btn.title.replace(folds[1], folds[0]),\\n                    })\\n                }\\n\\n                return 'toast://' + (fold === '1' ? '收起' : '展开');\\n            }, foldname, shsort),\\n            extra: {\\n                id: shsort + '_button',\\n            }\\n        })\\n        this.createPList(tabs, vari, shsort, custom);\\n    },\\n    setTabs2: function(tabs, vari, shsort, parse, exp) {\\n        let custom = parse.自定义;\\n        custom = this.getPreset(custom);\\n\\n        shsort = shsort ? shsort : 'shsort';\\n        var title = (getMyVar(shsort + '_sort', '0') == '1') ? '<b><span style=\\\"color:' + custom.逆序颜色 + '\\\">逆序</span></b>' : '<b><span style=\\\"color:' + custom.正序颜色 + '\\\">正序</span></b>'\\n\\n        var 折叠 = '<b>折叠' + '☷'.fontcolor(\\\"#D3D3D3\\\");\\n        var 展开 = '<b>展开' + '☰'.fontcolor(\\\"#FFA500\\\");\\n        var foldname = 'er_' + vari + 'fold';\\n        var fold = getMyVar(foldname, '1');\\n\\n        var url = $('#noLoading#').lazyRule((foldname, shsort, push) => {\\n            var pl = storage0.getMyVar('er_playlists', '{}');\\n            if (Object.keys(pl).length == 1) {\\n                return 'hiker://empty'\\n            }\\n\\n            var fold = getMyVar(foldname, '1');\\n            var obj = findItem(shsort + '_avatar')\\n            if (fold == '1') {\\n                var bcls = findItem(shsort + '_button');\\n                var tcls = findItemsByCls(shsort + '_tab');\\n                var lcls = findItem(shsort + '_line');\\n\\n                var pcls = findItemsByCls(shsort);\\n                var cs = [bcls].concat(tcls, [lcls], pcls);\\n\\n                if (push) {\\n                    var pcls = findItemsByCls(shsort + '_pushtab');\\n                    cs = pcls.concat(cs);\\n                }\\n\\n                var cx = $.dataConvert(cs);\\n                storage0.putMyVar(shsort + '_cls', cx);\\n                if (push) {\\n                    deleteItemByCls(shsort + '_pushtab');\\n                }\\n                deleteItem(bcls.extra.id);\\n                deleteItemByCls(shsort + '_tab');\\n                deleteItem(shsort + '_line');\\n                deleteItemByCls(shsort);\\n\\n                updateItem(obj.extra.id, {\\n                    desc: obj.desc.replace('展开<font color=\\\"#FFA500\\\">☰', '折叠<font color=\\\"#D3D3D3\\\">☷'),\\n                })\\n            }\\n            if (fold == '0') {\\n                var cs = storage0.getMyVar(shsort + '_cls');\\n                addItemAfter(shsort + '_avatar', cs);\\n                updateItem(obj.extra.id, {\\n                    desc: obj.desc.replace('折叠<font color=\\\"#D3D3D3\\\">☷', '展开<font color=\\\"#FFA500\\\">☰'),\\n                })\\n            }\\n            putMyVar(foldname, fold === '1' ? '0' : '1');\\n            return 'toast://' + (fold === '1' ? '收起' : '展开');\\n        }, foldname, shsort, (parse['推送'] ? true : false));\\n        var desc = (fold === '0' ? 折叠 : 展开) + '\\\\t';\\n\\n        if (exp.length == 1) {\\n            url = 'hiker://empty';\\n            desc = '';\\n        }\\n        d.push({\\n            title: vari + ':\\\\t\\\\t' + '共' + String(tabs.length).fontcolor('#4682B4') + '条线路',\\n            desc: desc,\\n            col_type: 'avatar',\\n            img: custom.图标,\\n            url: url,\\n            extra: {\\n                id: shsort + '_avatar',\\n                longClick: this.setLongclick(shsort),\\n            }\\n        })\\n        if (typeof(parse['推送']) != 'undefined' && parse['推送'])\\n            this.pushTab('er_' + vari, shsort);\\n\\n        if (fold == '0') {\\n            return\\n        }\\n\\n        d.push({\\n            title: '““””' + title,\\n            url: $('#noLoading#').lazyRule((vari, shsort, custom) => {\\n                let conf = getMyVar(shsort + '_sort', '0');\\n                var clslists = findItemsByCls(shsort);\\n                var newclslist = $.dataConvert(clslists);\\n                deleteItemByCls(shsort);\\n                newclslist.reverse();\\n                addItemAfter(shsort + '_line', newclslist);\\n\\n                var obj = findItem(shsort + '_button')\\n                var titles = [`${custom.正序颜色}\\\">正序`, `${custom.逆序颜色}\\\">逆序`];\\n\\n                if (conf == '1') {\\n                    updateItem(shsort + '_button', {\\n                        title: obj.title.replace(titles[1], titles[0]),\\n                    })\\n                    putMyVar(shsort + '_sort', '0');\\n                } else {\\n                    updateItem(shsort + '_button', {\\n                        title: obj.title.replace(titles[0], titles[1]),\\n                    })\\n                    putMyVar(shsort + '_sort', '1');\\n                }\\n                //refreshPage()\\n                return 'toast://切换排序成功'\\n            }, vari, shsort, custom),\\n            col_type: custom.线路样式,\\n            extra: {\\n                id: shsort + '_button',\\n            }\\n        })\\n        this.createPList(tabs, vari, shsort, custom);\\n    },\\n    setLists: function(lists, index, shsort, parse) {\\n\\n        storage0.putMyVar(shsort + '_list', lists);\\n\\n        parse = parse ? parse : {};\\n        var 样式 = parse.样式 ? parse.样式 : '';\\n        var 图标 = parse.图标 ? parse.图标 : 'https://hikerfans.com/tubiao/movie/13.svg';\\n        var ajax = parse.Ajax ? parse.Ajax : false;\\n\\n        shsort = shsort ? shsort : 'shsort';\\n\\n        if (ajax) {\\n            var list = lists;\\n            if (getMyVar(shsort + '_sort') == '1' && lists.length > 0) {\\n                list = lists.reverse();\\n            }\\n        } else {\\n            var list = lists[index];\\n            if (getMyVar(shsort + '_sort') == '1' && lists.length > 0) {\\n                list = lists[index].reverse();\\n            }\\n        }\\n\\n        if (样式 == '') {\\n            样式 = list.length > 3 ? 'text_4' : 'text_2'\\n        }\\n        \\n        var extra = '';\\n\\n        if (parse.extra != undefined) {\\n            extra = parse.extra\\n        }\\n\\n        if (list.length > 0) {\\n            var plist = storage0.getMyVar('er_playlists', '{}');\\n            if (!plist.hasOwnProperty(shsort)) {\\n                plist[shsort] = {};\\n            }\\n            plist[shsort]['cls'] = shsort;\\n            plist[shsort]['col_type'] = 样式;\\n            plist[shsort]['pic'] = 图标; \\n            plist[shsort]['extra']=extra;           \\n            storage0.putMyVar('er_playlists', plist);\\n        }\\n        \\n\\n        for (var j in list) {\\n            let lt = {\\n                title: list[j].title,\\n                url: list[j].url,\\n                col_type: 样式,\\n                pic: 图标,\\n                extra: {\\n                    id: list[j].url.replace(/@lazyRule[\\\\s\\\\S]+/g, ''),\\n                    cls: shsort,             \\n                }\\n            };\\n            lt['extra'] = Object.assign({}, lt['extra'], extra);\\n            d.push(lt);\\n        }\\n    },\\n    evalRe: function(input, 函数) {\\n        let result = input;\\n        result = eval('input' + 函数);\\n        return result;\\n    },\\n    getTabs: function(parse) {\\n        var tabs = [];\\n        var arts = [];\\n        if (typeof parse.线路 == 'object') {\\n            arts = parse.线路;\\n        }\\n        if (arts.length == 0) {\\n            arts = pdfa(html, parse.线路);\\n        }\\n        var 线路名 = parse.线路名称;\\n        var 替换函数 = '';\\n        if (parse.线路名称.includes('@@')) {\\n            线路名 = parse.线路名称.split('@@')[0];\\n            替换函数 = parse.线路名称.split('@@')[1];\\n        }\\n        for (var i in arts) {\\n            let linename = '';\\n            if (线路名 == '') {\\n                linename = arts[i];\\n            } else {\\n                linename = pdfh(arts[i], 线路名);\\n            }\\n            if (替换函数 != '') {\\n                linename = this.evalRe(linename, 替换函数);\\n            }\\n            tabs.push(linename);\\n        }\\n        return tabs;\\n    },\\n    getLists: function(parse, shsort) {\\n        shsort = shsort ? shsort : 'shsort';\\n        var lists = [];\\n        var conts = [];\\n        if (typeof parse.选集 == 'object') {\\n            conts = parse.选集;\\n        }\\n        if (conts.length == 0) {\\n            try {\\n                conts = pdfa(html, parse.选集);\\n            } catch {\\n                toast('选集定位有误')\\n            }\\n        }\\n\\n        let 替换函数 = '';\\n        var 选集名称 = parse.选集名称 ? parse.选集名称 : 'a&&Text';\\n        if (选集名称.includes('@@')) {\\n            选集名称 = parse.选集名称.split('@@')[0];\\n            替换函数 = parse.选集名称.split('@@')[1];\\n        }\\n\\n        var 选集链接 = parse.选集链接 ? parse.选集链接 : 'a&&href';\\n        var 解析 = parse.解析 ? parse.解析 : '';\\n        var temp = [];\\n\\n        for (var i in conts) {\\n            if (parse.选集列表 != undefined) {\\n                if (parse.选集列表 == 'object') {\\n                    lists.push(conts[i].map(x => {\\n                        return {\\n                            title: x.title,\\n                            url: x.url + 解析,\\n                        }\\n                    }))\\n                } else {\\n                    lists.push(pdfa(conts[i], parse.选集列表).reverse().map(x => {\\n                        return {\\n                            title: pdfh(x, 选集名称),\\n                            url: pd(x, 选集链接) + 解析,\\n                        }\\n                    }))\\n                }\\n            } else {\\n                var url = pd(conts[i], 选集链接);\\n                if (!选集链接.includes('href')) {\\n                    url = pdfh(conts[i], 选集链接);\\n                }\\n                let title = pdfh(conts[i], 选集名称);\\n                title = 替换函数 != '' ? this.evalRe(title, 替换函数) : title;\\n                temp.push({\\n                    title: title,\\n                    url: url + 解析,\\n                })\\n            }\\n        }\\n        let 倒序 = parse.倒序 ? parse.倒序 : false;\\n        var results = lists.length ? lists : [temp];\\n        if (倒序) {\\n            results = results.map(x => x.reverse());\\n        }\\n        var plist = storage0.getMyVar('er_playlists', '{}');\\n        if (results.some(x => x.length > 0)) {\\n            if (!plist.hasOwnProperty(shsort)) {\\n                plist[shsort] = {};\\n            }\\n            plist[shsort]['length'] = results.length;\\n        };\\n        storage0.putMyVar('er_playlists', plist);\\n        return results;\\n    },\\n    getPlayers: function(parse, mode, func) {\\n        //log(mode)\\n        var play = 'er_playlist_';\\n        this.preLoad(func);\\n        this.close(parse.map(x => x.类型), parse.length);\\n        mode = mode ? mode : 1;\\n\\n        let pe = [1];\\n        try {\\n            pe = parse.map(x => pdfa(html, x.线路).length).filter(y => y > 0);\\n        } catch {}\\n\\n\\n        parse.forEach((item, i) => {\\n            var tabs = ['主线'];\\n            if (item.线路 != undefined) {\\n                tabs = this.getTabs(item);\\n            }\\n            putMyVar(play + i + '_tabs', tabs);\\n            if (item.Ajax) {\\n                if (mode == 1) {\\n                    this.setTabs(tabs, item.类型, play + i, item);\\n                } else {\\n                    this.setTabs2(tabs, item.类型, play + i, item, pe);\\n                }\\n                putMyVar('er_html', html);\\n                putMyVar('er_url', MY_URL);\\n\\n                var lists = func(getMyVar('er_' + item.类型, '0'), MY_URL);\\n            } else {\\n                var lists = this.getLists(item, play + i);\\n\\n\\n                if (lists.some(x => x.length > 0)) {\\n                    if (mode == 1) {\\n                        this.setTabs(tabs, item.类型, play + i, item);\\n                    } else {\\n                        this.setTabs2(tabs, item.类型, play + i, item, pe);\\n                    }\\n                }\\n            }\\n            if (getMyVar('er_' + item.类型 + 'fold', '1') == '1') {\\n                this.setLists(lists, getMyVar('er_' + item.类型, '0'), play + i, item);\\n            }\\n            d.push({\\n                col_type: 'blank_block'\\n            })\\n        })\\n    }\\n}\\n\\n\\nlet Methods = {\\n    //多选模块\\n    MultiSelectMode: function(name, id, shsort) {\\n        return $('#noLoading#').lazyRule((datatitle, dataurl, shsort) => {\\n            function unique(arr) {\\n                const res = new Map()\\n                return arr.filter((a) => !res.has(a.url) && res.set(a.url, 1))\\n            }\\n            let duoselect = storage0.getMyVar(shsort + \\\"_duoselect\\\") ? storage0.getMyVar(shsort + \\\"_duoselect\\\") : [];\\n            if (duoselect.findIndex(x => x.url === dataurl) == -1) {\\n                duoselect.push({\\n                    title: datatitle,\\n                    url: dataurl\\n                })\\n                duoselect = unique(duoselect)\\n                updateItem(dataurl, {\\n                    title: `““””<span style=\\\"color:#FF5733\\\">` + datatitle,\\n                });\\n            } else {\\n                function removeByValue(arr, val) {\\n                    for (var i = 0; i < arr.length; i++) {\\n                        if (arr[i]['url'] == val) {\\n                            arr.splice(i, 1);\\n                            break;\\n                        }\\n                    }\\n                }\\n                removeByValue(duoselect, dataurl)\\n                updateItem(dataurl, {\\n                    title: datatitle\\n                });\\n            }\\n            storage0.putMyVar(shsort + \\\"_duoselect\\\", duoselect);\\n            return \\\"hiker://empty\\\"\\n        }, name, id, shsort)\\n    },\\n}\"},{\"col_type\":\"movie_3\",\"name\":\"⓷二级搜索\",\"path\":\"tool\",\"rule\":\"//var title = parseDomForHtml(html, 搜索标签);\\nvar title = MY_PARAMS.title;\\nlog(title)\\nd.push({\\n    title: '‘‘’’<b><middle><font color=\\\"#FF0000\\\"> 云盘君.推</font></middle>',\\n    pic_url: 'http://image.coolapk.com//apk_logo/2022/0507/14/0_3828_7254_639@260x260.png.t.png',\\n    url: 'hiker://search?s=' + title + '&rule=云盘君(推送)',\\n    col_type: 'icon_small_4',\\n});\\nd.push({\\n    title: '‘‘’’<b><middle><font color=\\\"#1E90FF\\\"> 聚影√</font></middle>',\\n    pic_url: 'http://image.coolapk.com/apk_logo/2021/0721/10/bb5c6d59a9e36159834b3f19fc749df5-285107-o_1fb3ftl3gcst1sdt1n3b1m2unjd18-uid-662435@360x360.png',\\n    url: 'hiker://search?s=' + title + '&rule=聚影√',\\n    col_type: 'icon_small_4',\\n});\\nd.push({\\n    title: '‘‘’’<b><middle><font color=\\\"#FF8C00\\\"> 聚阅√</font></middle>',\\n    pic_url: 'http://static.yingyonghui.com/icon/128/6863447.png',\\n    url: 'hiker://search?s=' + title + '&rule=聚阅√',\\n    col_type: 'icon_small_4',\\n});\\nd.push({\\n    title: '‘‘’’<b><middle><font color=\\\"#00FF00\\\"> 云盘君.简</font></middle>',\\n    pic_url: 'http://static.yingyonghui.com/icon/128/7000478.png',\\n    url: 'hiker://search?s=' + title + '&rule=云盘君.简',\\n    col_type: 'icon_small_4',\\n});\"},{\"col_type\":\"movie_3\",\"name\":\"⑧筛选页面\",\"path\":\"shai\",\"rule\":\"js:\\nvar d = [];\\nconst base_url = 'https://www.gugufan.com/index.php/vod/show/id/6.html';\\n\\nlet true_url = getMyVar(MY_RULE.url, base_url);\\nconst page = MY_PAGE;\\nMY_URL=true_url;\\nvar html=fetch(true_url)\\n//log(html)\\n\\nvar getRangeColors = function() {       \\n    return '#' + ('00000' + (Math.random() * 0x1000000 << 0).toString(16)).substr(-6);     \\n}\\n//动态分类定义 \\nconst 分类颜色 = getRangeColors();\\n\\nvar 大类定位 = typeof(大类定位) != 'undefined' ? 大类定位 : '.ec-casc-list&&ul,0:1';\\n//log(大类定位)\\nvar 大类标题 = typeof(大类标题) != 'undefined' ? 大类标题 : 'a&&Text';\\nconst 大类链接 = 'a&&href';\\nvar 拼接分类 = typeof(拼接分类) != 'undefined' ? 拼接分类 : 'body&&.nav-swiper:not(:has(:matches(资源|版本|频道))):has(li:nth-child(n+2))';\\nconst 小类定位 = 'body&&li;body&&a';\\nconst 分类标题 = 'a&&Text';\\nconst 分类链接 = 'li&&data-type@@@li&&data-val';\\nconst 开启搜索 = true;\\nlet 开启折叠= false;\\nconst 清除键 = ['dt_class', 'dt_area', 'dt_year', 'dt_lang', 'dt_letter', 'dt_time', 'dt_version', 'dt_state'];\\n\\nconst 附加定位 = [{\\n    一级定位: '.site-tabs',\\n    小类: 'body&&a',\\n    标题: 'a&&Text',\\n    链接: 'time@@a&&data-type',\\n    转换: true,\\n}]\\n\\nvar html = request(true_url.replace('hiker://empty##', ''))\\n\\neval(JSON.parse(request('hiker://page/yj')).rule);\\n\\n\\ntype = pdfh(html, '#dataList&&data-type');\\ntime = '' + Math.ceil(new Date().getTime() / 1000);\\n//key = evalPrivateJS('ZMNKQE5w4HUpWH6GG0ruk+vFxGRxkgJWuahpB85warDDaR3wy9NDjNapsZkYZZhV');\\nkey = md5(\\\"DS\\\" + time + \\\"DCC147D11943AF75\\\");\\n\\nvar result = post(getHome(MY_URL) + \\\"/index.php/api/vod\\\", {\\n    headers: {\\n        Referer: MY_URL,\\n    },\\n    body: {\\n        type: type,\\n        page: page,\\n        time: time,\\n        key: key,\\n        class: getMyVar('dt_class', ''),\\n        area: getMyVar('dt_area', ''),\\n        year: getMyVar('dt_year', ''),\\n        lang: getMyVar('dt_lang', ''),\\n        letter: getMyVar('dt_letter', ''),\\n        state: getMyVar('dt_state', ''),\\n        version: getMyVar('dt_version', ''),\\n        by: getMyVar('dt_time', ''),\\n\\n    }\\n})\\n\\nvar list=JSON.parse(result).list\\nlist.forEach(item => {  \\nvar urll ='https://www.gugufan.com//index.php/vod/detail/id/'+item.vod_id+'.html' + '#immersiveTheme#';\\nvar img = item.vod_pic.replace(/^mac/,'https');\\nif(/^upload/.test(img)) {\\n          img = 'https://www.gugufan.com/' + img;    \\n            } else {\\n          img = img;\\n            };\\n    d.push({\\n        title: item.vod_name,\\n        desc: item.vod_remarks,\\n        img: img,\\n        url: 'hiker://page/ej#noHistory##immersiveTheme#',\\n        extra: {\\n            url: urll,\\n            title: item.vod_name,\\n            img: img,\\n               },\\n        col_type: 'movie_3',\\n    })\\n})\\n\\nsetResult(d);\"},{\"col_type\":\"movie_3\",\"name\":\"⑦筛选分类\",\"path\":\"yj\",\"rule\":\"js:\\n/*\\nVer 2023-6-18 1.0\\n备注：不要用海阔代码格式化 内容会出错\\n必须参数：\\n分类颜色 大类定位 \\n小类定位 分类标题 分类链接\\nhtml =>源码 page =>页码\\n可选参数：\\n拼接分类 折叠标记 展开标记 排除\\n大类链接 大类标题 清除键 开启折叠\\n附加定位\\n说明：\\n外面用getMyVar(MY_RULE.url) 或者 状态 取链接\\n魔改:α\\n*/\\n\\nlet empty  = \\\"hiker://empty\\\";\\r\\nlet categories = [];\\r\\nif (typeof(拼接分类) != 'undefined' && 拼接分类 != ''){\\r\\n    categories = [pdfa(html, 大类定位).join('\\\\n')].concat(pdfa(html,  拼接分类));\\n    if(typeof(附加定位)!='undefined' && 附加定位.length>0){\\n            附加定位.forEach(x=>{\\n      var 一级=pdfa(html,x.一级定位).map(s=>{\\n          var 定位=pdfa(s,x.小类).map(q=>{\\n              var title=pdfh(q,x.标题);\\n              var url='a'\\n              if(x.链接.includes('@@')){                  \\n                  state=x.链接.split('@@')[0]\\n                  value=pdfh(q,x.链接.split('@@')[1]);\\n                  if(x.转换==true){\\n                      return `<li data-type=\\\"${state}\\\" data-val=\\\"${value}\\\"><a href=\\\"\\\">${title}</a></li>`\\n                  }else{\\n                      return `<a type=\\\"@extra\\\" state=\\\"${state}\\\" value=\\\"${value}\\\">${title}</a>`;\\n                  }\\n              }else{\\n                  href=pd(q,x.链接);\\n                  return `<a href=\\\"${href}\\\">${title}</a>`;\\n              }\\n          });\\n          return 定位;\\n        });\\n       categories.push(一级.join('\\\\n'));\\n            });       \\n    }\\r\\n} else {     \\r\\n    categories = pdfa(html,  大类定位);\\r\\n}\\r\\nlet init_cate = new Array(20).fill(\\\"0\\\");\\r\\nconst fold = getMyVar(MY_RULE.group, \\\"0\\\");\\r\\nconst cate_temp = JSON.parse(getMyVar(\\\"head.cate\\\", JSON.stringify(init_cate)));\\nvar 折叠状态=(typeof(开启折叠) != 'undefined')?开启折叠:true;\\r\\nvar 折叠=(typeof(折叠标记) != 'undefined' && 折叠标记 != '')?折叠标记:'““””' + '∨'.fontcolor(\\\"#FF0000\\\");\\nvar 展开=(typeof(展开标记) != 'undefined' && 展开标记 != '')?展开标记:'““””' + '∧'.fontcolor(\\\"#1aad19\\\");\\nvar 清除=(typeof(清除键) != 'undefined' && 清除键 != '')?清除键:[];\\nvar 状态=(typeof(状态标记) != 'undefined' && 状态标记 != '')?状态标记:MY_RULE.url;\\nvar 大类处理=typeof(一级分类处理)=='function'?true:false;\\nvar 搜索=typeof(开启搜索)!='undefined'?开启搜索:false;\\nvar 全清=(typeof(全清键) != 'undefined' && 全清键 != '')?全清键:[];\\n全清.unshift('yi_firstpage');\\n\\r\\nif (parseInt(page) === 1) {\\n    if(搜索){\\n        d.push({\\n        title: \\\"\\\",\\n        url: \\\"'hiker://search?rule=\\\" + MY_RULE.title + \\\"&s='+input\\\",\\n        desc: \\\"搜索关键词\\\",\\n        col_type: \\\"input\\\",\\n        extra: {\\n            defaultValue: getMyVar('keyword', ''),\\n            onChange: $.toString(() => {\\n                putMyVar('keyword', input);\\n            })\\n        }\\n      })\\n    }\\n    if(折叠状态){\\r\\n     d.push({\\r\\n        title: fold === '1' ?  折叠 : 展开,\\r\\n        url: $().lazyRule((fold,u,all) => {\\r\\n            putMyVar(MY_RULE.group, fold === '1' ? '0' : '1');\\n            all.forEach((item)=>{\\n               clearMyVar(item)\\n            })\\r\\n            refreshPage(false);\\r\\n            return \\\"hiker://empty\\\";\\r\\n        }, fold,状态 ,全清),\\r\\n        col_type: 'scroll_button',\\n        extra:{\\n            longClick:[{\\n                title:'清除状态',\\n                js:$.toString((x,all,cl)=>{\\n                     clearMyVar(x);\\n                     clearMyVar('head.cate');                     \\n                     all.forEach((item)=>{\\n                            clearMyVar(item)\\n                     })\\n                     cl.forEach((item)=>{\\n                            clearMyVar(item)\\n                     })\\n                     refreshPage();\\n                },状态,全清,清除)\\n            }]\\n        }\\r\\n     })\\n    }\\r\\n    let setTitle=(k,i,t)=>{             \\n      return k==i?\\\"““””\\\" +t.fontcolor(分类颜色):t\\r\\n    }\\r\\n    categories.forEach((category, index) => {\\n        let sub_categories=[];\\n        if(小类定位.includes(';')){\\n            sub_categories = pdfa(category, 小类定位.split(';')[0]);\\n            if(sub_categories.length==0){\\n            sub_categories = pdfa(category, 小类定位.split(';')[1]);\\n            }\\n        }else{\\r\\n        sub_categories = pdfa(category, 小类定位);\\n        }\\r\\n        if (index === 0) {\\r\\n            sub_categories.forEach((item, key) => {\\n                let _大类链接=(typeof(大类链接) != 'undefined' && 大类链接 != '')?大类链接:分类链接;\\n                         \\r\\n                let _大类标题=(typeof(大类标题) != 'undefined' && 大类标题 != '')?大类标题:分类标题;              \\n               \\r\\n                let title = pdfh(item, _大类标题);\\r\\n                if (typeof(排除) != 'undefined' && 排除 != '') {\\r\\n                    title = title.replace(new RegExp(排除, \\\"g\\\"), \\\"\\\");\\r\\n                }\\n                let params={\\r\\n                        cate_temp: cate_temp,key: key,page: page,clears:清除,state:状态,allclears:全清\\r\\n                }                \\n                \\n                let url=pd(item, _大类链接);\\n                if(大类处理){\\n                    url=一级分类处理(url)\\n                }\\n                //log(url)\\n                d.push({  \\r\\n                    title: setTitle(key.toString(),cate_temp[index],title),\\n                    col_type: 'scroll_button',\\r\\n                    url: $(url + '#noLoading#').lazyRule((params) => {    \\r\\n                        let new_cate = [];\\n                        params.clears.forEach((item)=>{                            \\n                            clearMyVar(item)\\n                        })\\n                        params.allclears.forEach((item)=>{\\n                            clearMyVar(item)\\n                        })\\n                        \\r\\n                        params.cate_temp.forEach((cate, index) => {\\r\\n                            new_cate.push(index === 0 ? params.key.toString() : \\\"0\\\")\\r\\n                        })\\r\\n                        putMyVar(\\\"head.cate\\\", JSON.stringify(new_cate));\\r\\n                        putMyVar(params.state, input);\\r\\n                        refreshPage(true);\\r\\n                        return \\\"hiker://empty\\\";\\r\\n                    },params)\\r\\n                });\\r\\n            });\\r\\n            d.push({\\r\\n                col_type: \\\"blank_block\\\",\\r\\n            })\\r\\n        } else if (fold === '1'||折叠状态==false) {\\r\\n            sub_categories.forEach((item, key) => {\\n                var extrapos=false;\\n                if(item.includes('type=\\\"@extra\\\"')){\\n                    extrapos=true;\\n                    //log('附加定位')\\n                }   \\n                \\n                if(extrapos){\\n                   var title = pdfh(item, 'a&&Text');\\r\\n                if (typeof(排除) != 'undefined' && 排除 != '') {\\r\\n                    title = title.replace(new RegExp(排除, \\\"g\\\"), \\\"\\\");\\r\\n                  }\\n                var json={\\n                    type:pdfh(item,'a&&state'),\\n                    value:pdfh(item,'a&&value'),\\n                  }\\n                }else{\\n    \\r\\n                    var title = pdfh(item, 分类标题);\\r\\n                if (typeof(排除) != 'undefined' && 排除 != '') {\\r\\n                    title = title.replace(new RegExp(排除, \\\"g\\\"), \\\"\\\");\\r\\n                }\\n                \\n                var json='';\\n                switch (true){\\n                    case 分类链接.includes('@@@'):\\n                    json={\\n                    type:pdfh(item,分类链接.split('@@@')[0]),\\n                    value:pdfh(item,分类链接.split('@@@')[1]),\\n                    }\\n                    break;\\n                    case 分类链接.includes('@@'):\\n                    json={\\n                    type:分类链接.split('@@')[0],\\n                    value:pdfh(item,分类链接.split('@@')[1]),\\n                    }\\n                    break;\\n                    default:\\n                    json=pd(item,分类链接);\\n                    break;\\n                }\\n               /*var json=分类链接.includes('@@@')?{\\n                    type:pdfh(item,分类链接.split('@@@')[0]),\\n                    value:pdfh(item,分类链接.split('@@@')[1]),\\n                }:pd(item,分类链接);\\n                \\n                json=分类链接.includes('@@')?{\\n                    type:分类链接.split('@@')[0],\\n                    value:pdfh(item,分类链接.split('@@')[1]),\\n                }:pd(item,分类链接);*/\\n               \\n                }\\n                \\n                let params= {\\r\\n                    cate_temp: cate_temp,index: index,key: key, page: page,json:json,state:状态,allclears:全清\\r\\n                }\\r\\n                d.push({\\r\\n                    title: setTitle(key.toString(),cate_temp[index],title),\\r\\n                    url: $('hiker://empty' + '#noLoading#').lazyRule((params) => {\\n                        params.allclears.forEach((item)=>{\\n                            clearMyVar(item)\\n                        })\\r\\n                        params.cate_temp[params.index] = params.key.toString();\\r\\n                        putMyVar(\\\"head.cate\\\", JSON.stringify(params.cate_temp));\\n                        if(params.json.constructor === Object){\\n                            putMyVar('dt_'+params.json.type,params.json.value);\\n                        }else{\\n                            putMyVar(params.state, params.json);\\n                        }   \\r\\n                        refreshPage(true);\\r\\n                        return \\\"hiker://empty\\\";\\r\\n                    },params),\\r\\n                    col_type: 'scroll_button',\\r\\n                });\\r\\n            });\\r\\n            d.push({\\r\\n                col_type: \\\"blank_block\\\",\\r\\n            });\\r\\n        }\\r\\n    })\\r\\n}\\n\\n\\n\\n\"}]","proxy":"","icon":"https://www.gugufan.com/upload/site/20230610-1/30792775d251f689c65617a7733805e4.jpg"}